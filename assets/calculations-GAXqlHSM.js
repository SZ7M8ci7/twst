const U={};for(let t=1;t<=10;t++)U[`ATKUP(極小)${t}`]=((5+.5*t)/100).toString(),U[`ATKUP(小)${t}`]=((10+1*t)/100).toString(),U[`ATKUP(中)${t}`]=((20+1.5*t)/100).toString(),U[`ATKUP(大)${t}`]=((30+2*t)/100).toString(),U[`ATKUP(極大)${t}`]=((50+4*t)/100).toString(),U[`ATKDOWN(極小)${t}`]=(-1*(5+.5*t)/100).toString(),U[`ATKDOWN(小)${t}`]=(-1*(10+1*t)/100).toString(),U[`ATKDOWN(中)${t}`]=(-1*(20+1.5*t)/100).toString(),U[`ATKDOWN(大)${t}`]=(-1*(30+2*t)/100).toString(),U[`ATKDOWN(極大)${t}`]=(-1*(50+4*t)/100).toString();const s={};for(let t=1;t<=10;t++)s[`ダメUP(極小)${t}`]=((1.25+.125*t)/100).toString(),s[`ダメUP(小)${t}`]=((2.5+.25*t)/100).toString(),s[`ダメUP(中)${t}`]=((5+.375*t)/100).toString(),s[`ダメUP(大)${t}`]=((7.5+.5*t)/100).toString(),s[`ダメUP(極大)${t}`]=((12.5+1*t)/100).toString(),s[`ダメDOWN(極小)${t}`]=(-1*(1.25+.125*t)/100).toString(),s[`ダメDOWN(小)${t}`]=(-1*(2.5+.25*t)/100).toString(),s[`ダメDOWN(中)${t}`]=(-1*(5+.375*t)/100).toString(),s[`ダメDOWN(大)${t}`]=(-1*(7.5+.5*t)/100).toString(),s[`ダメDOWN(極大)${t}`]=(-1*(12.5+1*t)/100).toString(),s[`属性ダメUP(極小)${t}`]=((1.5+.15*t)/100).toString(),s[`属性ダメUP(小)${t}`]=((3+.3*t)/100).toString(),s[`属性ダメUP(中)${t}`]=((6+.45*t)/100).toString(),s[`属性ダメUP(大)${t}`]=((9+.6*t)/100).toString(),s[`属性ダメUP(極大)${t}`]=((15+1.2*t)/100).toString(),s[`属性ダメDOWN(極小)${t}`]=(-1*(1.5+.15*t)/100).toString(),s[`属性ダメDOWN(小)${t}`]=(-1*(3+.3*t)/100).toString(),s[`属性ダメDOWN(中)${t}`]=(-1*(6+.45*t)/100).toString(),s[`属性ダメDOWN(大)${t}`]=(-1*(9+.6*t)/100).toString(),s[`属性ダメDOWN(極大)${t}`]=(-1*(15+1.2*t)/100).toString();const K={"クリティカル(1/1)":1.25,"クリティカル(1/2)":1.125,"クリティカル(1/3)":1.0833,"クリティカル(2/3)":1.1666,"クリティカル(小)":1.125,"クリティカル(中)":1.25,"クリティカル(大)":1.1666,"クリティカル(極大)":1.25},$={"単発(弱)Lv1":.525,"単発(弱)Lv2":.55,"単発(弱)Lv3":.575,"単発(弱)Lv4":.6,"単発(弱)Lv5":.625,"単発(弱)Lv6":.65,"単発(弱)Lv7":.675,"単発(弱)Lv8":.7,"単発(弱)Lv9":.725,"単発(弱)Lv10":.75,"単発(強)Lv1":.6625,"単発(強)Lv2":.7,"単発(強)Lv3":.7375,"単発(強)Lv4":.775,"単発(強)Lv5":.8125,"単発(強)Lv6":.85,"単発(強)Lv7":.8875,"単発(強)Lv8":.925,"単発(強)Lv9":.9625,"単発(強)Lv10":1,"連撃(弱)Lv1":.525,"連撃(弱)Lv2":.55,"連撃(弱)Lv3":.575,"連撃(弱)Lv4":.6,"連撃(弱)Lv5":.625,"連撃(弱)Lv6":.65,"連撃(弱)Lv7":.675,"連撃(弱)Lv8":.7,"連撃(弱)Lv9":.725,"連撃(弱)Lv10":.75,"連撃(強)Lv1":.6625,"連撃(強)Lv2":.7,"連撃(強)Lv3":.7375,"連撃(強)Lv4":.775,"連撃(強)Lv5":.8125,"連撃(強)Lv6":.85,"連撃(強)Lv7":.8875,"連撃(強)Lv8":.925,"連撃(強)Lv9":.9625,"連撃(強)Lv10":1,デュオ魔法Lv1:.6625,デュオ魔法Lv2:.7,デュオ魔法Lv3:.7375,デュオ魔法Lv4:.775,デュオ魔法Lv5:.8125,デュオ魔法Lv6:.85,デュオ魔法Lv7:.8875,デュオ魔法Lv8:.925,デュオ魔法Lv9:.9625,デュオ魔法Lv10:1,"3連撃(弱)Lv1":.525,"3連撃(弱)Lv2":.55,"3連撃(弱)Lv3":.575,"3連撃(弱)Lv4":.6,"3連撃(弱)Lv5":.625,"3連撃(弱)Lv6":.65,"3連撃(弱)Lv7":.675,"3連撃(弱)Lv8":.7,"3連撃(弱)Lv9":.725,"3連撃(弱)Lv10":.75,"3連撃(強)Lv1":.6625,"3連撃(強)Lv2":.7,"3連撃(強)Lv3":.7375,"3連撃(強)Lv4":.775,"3連撃(強)Lv5":.8125,"3連撃(強)Lv6":.85,"3連撃(強)Lv7":.8875,"3連撃(強)Lv8":.925,"3連撃(強)Lv9":.9625,"3連撃(強)Lv10":1},c={"HPUP(小)1":.11,"HPUP(小)2":.12,"HPUP(小)3":.13,"HPUP(小)4":.14,"HPUP(小)5":.15,"HPUP(小)6":.16,"HPUP(小)7":.17,"HPUP(小)8":.18,"HPUP(小)9":.19,"HPUP(小)10":.2,"HPUP(中)1":.21,"HPUP(中)2":.22,"HPUP(中)3":.23,"HPUP(中)4":.24,"HPUP(中)5":.25,"HPUP(中)6":.26,"HPUP(中)7":.27,"HPUP(中)8":.28,"HPUP(中)9":.29,"HPUP(中)10":.3,"HP&ATKUP(小)1":.11,"HP&ATKUP(小)2":.12,"HP&ATKUP(小)3":.13,"HP&ATKUP(小)4":.14,"HP&ATKUP(小)5":.15,"HP&ATKUP(小)6":.16,"HP&ATKUP(小)7":.17,"HP&ATKUP(小)8":.18,"HP&ATKUP(小)9":.19,"HP&ATKUP(小)10":.2,"HP&ATKUP(中)1":.21,"HP&ATKUP(中)2":.22,"HP&ATKUP(中)3":.23,"HP&ATKUP(中)4":.24,"HP&ATKUP(中)5":.25,"HP&ATKUP(中)6":.26,"HP&ATKUP(中)7":.27,"HP&ATKUP(中)8":.28,"HP&ATKUP(中)9":.29,"HP&ATKUP(中)10":.3},T={"ATKUP(小)1":.11,"ATKUP(小)2":.12,"ATKUP(小)3":.13,"ATKUP(小)4":.14,"ATKUP(小)5":.15,"ATKUP(小)6":.16,"ATKUP(小)7":.17,"ATKUP(小)8":.18,"ATKUP(小)9":.19,"ATKUP(小)10":.2,"ATKUP(中)1":.215,"ATKUP(中)2":.23,"ATKUP(中)3":.245,"ATKUP(中)4":.26,"ATKUP(中)5":.275,"ATKUP(中)6":.29,"ATKUP(中)7":.305,"ATKUP(中)8":.32,"ATKUP(中)9":.335,"ATKUP(中)10":.35,"HP&ATKUP(小)1":.11,"HP&ATKUP(小)2":.12,"HP&ATKUP(小)3":.13,"HP&ATKUP(小)4":.14,"HP&ATKUP(小)5":.15,"HP&ATKUP(小)6":.16,"HP&ATKUP(小)7":.17,"HP&ATKUP(小)8":.18,"HP&ATKUP(小)9":.19,"HP&ATKUP(小)10":.2,"HP&ATKUP(中)1":.215,"HP&ATKUP(中)2":.23,"HP&ATKUP(中)3":.245,"HP&ATKUP(中)4":.26,"HP&ATKUP(中)5":.275,"HP&ATKUP(中)6":.29,"HP&ATKUP(中)7":.305,"HP&ATKUP(中)8":.32,"HP&ATKUP(中)9":.335,"HP&ATKUP(中)10":.35},y={"回復(極小)1":.51,"回復(極小)2":.52,"回復(極小)3":.53,"回復(極小)4":.54,"回復(極小)5":.55,"回復(極小)6":.56,"回復(極小)7":.57,"回復(極小)8":.58,"回復(極小)9":.59,"回復(極小)10":.6,"回復(小)1":.92,"回復(小)2":.94,"回復(小)3":.96,"回復(小)4":.98,"回復(小)5":1,"回復(小)6":1.02,"回復(小)7":1.04,"回復(小)8":1.06,"回復(小)9":1.08,"回復(小)10":1.1,"回復(中)1":1.34,"回復(中)2":1.38,"回復(中)3":1.42,"回復(中)4":1.46,"回復(中)5":1.5,"回復(中)6":1.54,"回復(中)7":1.58,"回復(中)8":1.62,"回復(中)9":1.66,"回復(中)10":1.7,"継続回復(小)1":0,"継続回復(小)2":0,"継続回復(小)3":0,"継続回復(小)4":0,"継続回復(小)5":0,"継続回復(小)6":0,"継続回復(小)7":0,"継続回復(小)8":0,"継続回復(小)9":0,"継続回復(小)10":0,"継続回復(中)1":0,"継続回復(中)2":0,"継続回復(中)3":0,"継続回復(中)4":0,"継続回復(中)5":0,"継続回復(中)6":0,"継続回復(中)7":0,"継続回復(中)8":0,"継続回復(中)9":0,"継続回復(中)10":0,"回復&継続回復(小)1":.92,"回復&継続回復(小)2":.94,"回復&継続回復(小)3":.96,"回復&継続回復(小)4":.98,"回復&継続回復(小)5":1,"回復&継続回復(小)6":1.02,"回復&継続回復(小)7":1.04,"回復&継続回復(小)8":1.06,"回復&継続回復(小)9":1.08,"回復&継続回復(小)10":1.1},D={"継続回復(小)1":.105,"継続回復(小)2":.11,"継続回復(小)3":.115,"継続回復(小)4":.12,"継続回復(小)5":.125,"継続回復(小)6":.13,"継続回復(小)7":.135,"継続回復(小)8":.14,"継続回復(小)9":.145,"継続回復(小)10":.15,"継続回復(中)1":.205,"継続回復(中)2":.21,"継続回復(中)3":.215,"継続回復(中)4":.22,"継続回復(中)5":.225,"継続回復(中)6":.23,"継続回復(中)7":.235,"継続回復(中)8":.24,"継続回復(中)9":.245,"継続回復(中)10":.25,"回復(極小)1":0,"回復(極小)2":0,"回復(極小)3":0,"回復(極小)4":0,"回復(極小)5":0,"回復(極小)6":0,"回復(極小)7":0,"回復(極小)8":0,"回復(極小)9":0,"回復(極小)10":0,"回復(小)1":0,"回復(小)2":0,"回復(小)3":0,"回復(小)4":0,"回復(小)5":0,"回復(小)6":0,"回復(小)7":0,"回復(小)8":0,"回復(小)9":0,"回復(小)10":0,"回復(中)1":0,"回復(中)2":0,"回復(中)3":0,"回復(中)4":0,"回復(中)5":0,"回復(中)6":0,"回復(中)7":0,"回復(中)8":0,"回復(中)9":0,"回復(中)10":0,"回復&継続回復(小)1":.105,"回復&継続回復(小)2":.11,"回復&継続回復(小)3":.115,"回復&継続回復(小)4":.12,"回復&継続回復(小)5":.125,"回復&継続回復(小)6":.13,"回復&継続回復(小)7":.135,"回復&継続回復(小)8":.14,"回復&継続回復(小)9":.145,"回復&継続回復(小)10":.15};function j(t,o){if(!t)return{hp:0,buddyHP:0,heal:0,damage:{}};const n=t.hp||0,e=M(t,o),i=W(t),u=x(t,o);return{hp:n,buddyHP:e,heal:i,damage:u,magic1DamageDetails:t.magic1DamageDetails,magic2DamageDetails:t.magic2DamageDetails,magic3DamageDetails:t.magic3DamageDetails}}function M(t,o){if(!o)return 0;let n=0;for(let i=1;i<=3;i++){const u=t[`buddy${i}c`],P=t[`buddy${i}s`],l=t[`buddy${i}Lv`];if(u&&u in o){const f=P+l,d=f in c?Number(c[f]):0;n+=d}}return n*t.hp}function W(t){let o=0;const n=[];return t.isM1Selected&&n.push(1),t.isM2Selected&&n.push(2),t.isM3Selected&&n.push(3),t.buffs&&Array.isArray(t.buffs)&&t.buffs.forEach(e=>{if((e.buffOption==="回復"||e.buffOption==="継続回復")&&e.magicOption){const i=Number(e.magicOption.replace("M",""));if(n.includes(i)){const u=Number(e.levelOption)||10;if(e.buffOption==="回復"){const P=`回復(${e.powerOption})${u}`,l=P in y?y[P]:0;l>0&&(o+=Number(l)*Number(t.atk))}else if(e.buffOption==="継続回復"){const P=`継続回復(${e.powerOption})${u}`,l=P in D?D[P]:0;l>0&&(o+=3*Number(l)*Number(t.hp))}}}}),o}const k={水:{火:1.5,木:.5},木:{水:1.5,火:.5},火:{木:1.5,水:.5}};function L(t,o,n){var i;if(t==="無")return n;const e=(i=k[t])==null?void 0:i[o];return e?n*e:n}function x(t,o){const n={火:0,水:0,木:0,無:0,対全:0};if(!o)return n;const e=B(t,o);for(let i=1;i<=3;i++){const u=`magic${i}`,P=t[`${u}Attribute`],l=t[`${u}Power`]||"単発(弱)",f=t[`${u}Lv`]||1,d=R(t,u),A=d.atkBuffTotal,a=d.dmgBuffTotal,b=d.criticalMultiplier,S=t.atk+A+e,H=l==="デュオ"?"デュオ魔法":l,g=`${H}Lv${f}`,N=g in $?$[g]:1,p=P==="無"?1.1:1,O=w(H),m=S*(Number(N)*p+a)*O*b,v=C(P,m);t[`magic${i}DamageDetails`]={attribute:P,power:l,baseDamage:Math.round(m),fire:Math.round(v.fire),water:Math.round(v.water),wood:Math.round(v.wood),neutral:Math.round(v.neutral),max:Math.round(v.max)},t[`isM${i}Selected`]&&(n.火+=Math.round(v.fire),n.水+=Math.round(v.water),n.木+=Math.round(v.wood),n.無+=Math.round(v.neutral),n.対全+=Math.round(v.max))}return n}function B(t,o){const n=t.buddy1c&&t.buddy1c in o&&t.buddy1s+t.buddy1Lv in T?T[t.buddy1s+t.buddy1Lv]:0,e=t.buddy2c&&t.buddy2c in o&&t.buddy2s+t.buddy2Lv in T?T[t.buddy2s+t.buddy2Lv]:0,i=t.buddy3c&&t.buddy3c in o&&t.buddy3s+t.buddy3Lv in T?T[t.buddy3s+t.buddy3Lv]:0;return t.atk*(n+e+i)}function R(t,o){let n=0,e=0,i=1;if(t.buffs&&Array.isArray(t.buffs))for(const u of t.buffs){if(u.magicOption!==`M${o.charAt(5)}`)continue;const P=u.buffOption,l=u.powerOption,f=u.levelOption||10;if(P==="ATKUP"||P==="ATKDOWN"){const d=`${P}(${l})${f}`;d in U&&(n+=Number(U[d])*t.atk)}if(P==="ダメージUP"||P==="属性ダメUP"||P==="ダメージDOWN"||P==="属性ダメDOWN"){let d="";P==="ダメージUP"?d="ダメUP":P==="ダメージDOWN"?d="ダメDOWN":P==="属性ダメUP"?d="属性ダメUP":P==="属性ダメDOWN"&&(d="属性ダメDOWN");const A=`${d}(${l})${f}`;A in s&&(e+=Number(s[A]))}if(P==="クリティカル"){const d=`クリティカル(${l})`;d in K&&(i=Math.max(i,K[d]))}}else for(let u=1;u<=6;u++){const P=`${o}Buff${u}`,l=t[`${o}Buff${u}Lv`]||"",f=t[P]+l;f in U&&(n+=Number(U[f])*t.atk),f in s&&(e+=Number(s[f])),f in K&&(i=Math.max(i,K[f]))}return{atkBuffTotal:n,dmgBuffTotal:e,criticalMultiplier:i}}function w(t){return t==="連撃(弱)"||t==="連撃(強)"?1.8:t==="デュオ魔法"||t==="3連撃(弱)"||t==="3連撃(強)"?2.4:1}function C(t,o){const n=L(t,"火",o),e=L(t,"水",o),i=L(t,"木",o),u=L(t,"無",o),P=Math.max(n,e,i);return{fire:n,water:e,wood:i,neutral:u,max:P}}function r(t,o,n,e,i){const P={R:70,SR:90,SSR:110}[n]||110,l=o||Math.floor(t/(n==="SSR"?4.7:n==="SR"?4.3:4.2)),f=l*.2,d=P>1?(t-2*f-l)/(P-1):0,A=P-e,a=i?0:1,b=t-d*A-f*a;return Math.max(0,Number(b.toFixed(1)))}function V(t,o,n){const e=Number(t.originalMaxHP)||Number(t.max_hp)||Number(t.hp)||0,i=Number(t.base_hp)||0;return r(e,i,t.rare,o,n)}function E(t,o,n){const e=Number(t.originalMaxATK)||Number(t.max_atk)||Number(t.atk)||0,i=Number(t.base_atk)||0;return r(e,i,t.rare,o,n)}export{V as a,c as b,j as c,T as d,D as e,y as h,E as r};
