import{b as Ua,d as xa,l as ye,h as La,p as Be,i as Ea}from"./common-InrD7OYB.js";import{u as Pa}from"./handCollection-CvJMJ7gU.js";import{d as Ta,i as Oa,a1 as Aa,a8 as Re,bd as Ka,a2 as He,c as te,w as u,j as h,f as c,aa as Va,a as i,ap as se,ac as Ia,t as m,u as T,F as N,k as U,bw as fe,l as x,ab as O,b as w,r as p,g as A,a4 as za,o as f,bx as $e,a3 as G,by as We,Q as qe,_ as ja}from"./index-B5NYabxS.js";import{C as j}from"./CharacterIconWithType-D0qn6l1T.js";import{r as Fa}from"./calculations-gXkkWyKb.js";import{S as Ba}from"./searchPresets-BmNjnMO9.js";import{c as Q,V as Ge}from"./characters_info-B_93mtOJ.js";import{V as Qe,a as Xe}from"./VCard-DiNWBqUf.js";import{V as Ye}from"./VCardText-CXB8OXo_.js";import{V as me}from"./VSpacer-D_z63li4.js";import{V as Ra}from"./VContainer-BVx0WYQd.js";const Ha={key:0,class:"loading-container"},$a={class:"character-row"},Wa={class:"damage-row"},qa=["onClick"],Ga={class:"header-content"},Qa=["src","alt"],Xa={class:"sort-icon"},Ya={key:0,class:"sort-indicator"},Za={key:1,class:"sort-hint"},Ja={class:"character-row all-characters-row"},et={class:"damage-row"},at={class:"damage-item all-characters-item"},tt=["onClick"],st={class:"damage-row"},it={class:"damage-item"},nt=["onClick"],lt={class:"damage-item-content"},ot={class:"card-info"},ct={key:0,class:"buddy-cards"},rt={key:0,class:"buff-info"},ut={class:"buff-container"},dt={key:0,class:"buff-source"},ft={class:"damage-value"},mt={class:"damage-value-actions"},vt={class:"deck-search-menu-description"},gt={class:"deck-search-table"},ht={class:"deck-search-table-header"},bt={class:"deck-search-table-icon-header"},pt=["disabled","onClick"],kt={class:"deck-search-table-open"},Ct={class:"pagination-controls"},_t={class:"page-info"},yt={class:"damage-item-content"},St={class:"card-info"},wt={key:0,class:"buddy-cards"},Dt={key:0,class:"buff-info"},Mt={class:"buff-container"},Nt={key:0,class:"buff-source"},Ut={class:"damage-value"},xt={class:"damage-value-actions"},Lt={class:"deck-search-menu-description"},Et={class:"deck-search-table"},Pt={class:"deck-search-table-header"},Tt={class:"deck-search-table-icon-header"},Ot=["disabled","onClick"],At={class:"deck-search-table-open"},Kt={class:"pagination-controls"},Vt={class:"page-info"},Ze=50,It=10,zt=Ta({__name:"finisherDamage",setup(jt){const{t:D}=Oa(),Je=Ua(),L=Pa(),ea=xa(),aa=za(),{characters:k}=Aa(Je),y=p(!1),v=p(new Map),ve=p({"--icon-size":`${Ze}px`,"--gap-size":`${It}px`}),ta={fire:"fire",water:"water",flora:"flora",cosmic:"cosmic"},ge=p(!0),he=p({}),K=A(()=>{const e={};for(const[a,t]of v.value.entries())e[a]=t.iconSrc||t.imgSrc||"";return e});Re(async()=>{fa();try{const e=await ye(k.value,"name"),a=await ye(Q,"name_en","icon/"),t={},s=new Map(Q.map(n=>[n.name_ja,n.name_en]));k.value.forEach(n=>{const d=s.get(n.name);d&&a[d]&&(t[n.name]=a[d])});const l=await ye(Object.values(ta),n=>n,"icon/");v.value=La(k.value,e,t,l);const o=new Set(v.value.keys());Q.forEach(n=>{const d=a[n.name_en];d&&(n.name_ja&&!o.has(n.name_ja)&&v.value.set(n.name_ja,{type:"",wikiUrl:"",imgSrc:"",iconSrc:d}),n.name_en&&!o.has(n.name_en)&&v.value.set(n.name_en,{type:"",wikiUrl:"",imgSrc:"",iconSrc:d}))})}catch(e){console.error("Error in onMounted finisherDamage.vue:",e)}finally{ge.value=!1}});const F={},sa=["(極小)","(小)","(中)","(大)","(極大)"],ia=["ATKUP","ダメージUP","無属性ダメージUP","火属性ダメージUP","水属性ダメージUP","木属性ダメージUP","被ダメージUP"],na={"ATKUP(極小)":.1,"ATKUP(小)":.2,"ATKUP(中)":.35,"ATKUP(大)":.5,"ATKUP(極大)":.8},V={},B={},R={},H={},$={},X={},Y={},Z={};function Se(){Object.keys(F).forEach(e=>{F[e]=[]}),k.value.forEach(e=>{if(y.value&&!L.getHandCard(e.name).isOwned)return;const a=e.etc.split(",");F[e.chara]||(F[e.chara]=[]),a.forEach(t=>{const s=t.trim();!s.includes("味方")&&!(s.includes("被ダメージUP")&&s.includes("相手"))||ia.forEach(l=>{s.startsWith(l)&&sa.forEach(o=>{if(s.includes(o)){let n="";if(s.includes("(M1)")?n="M1":s.includes("(M2)")?n="M2":s.includes("(M3)")&&(n="M3"),n==="M3"){if(e.rare==="R"||e.rare==="SR")return;if(y.value){const d=L.getHandCard(e.name);if(d.isOwned&&!d.isM3)return}}F[e.chara].push({buff:l+o,name:e.name,buffSource:n})}})})})})}Se();function we(){k.value.forEach(e=>{if(e.rare!="SSR")return;let a,t=!0;if(y.value){const C=L.getHandCard(e.name);if(C.isOwned){const g=Number(C.level),M=C.isLimitBreak;a=Fa(e,g,M)}else t=!1,a=0}else{const C=e;a=Number(C.originalMaxATK)||Number(C.max_atk)||Number(e.atk)||0}if(!t)return;const s=be(e.buddy1s)+be(e.buddy2s)+be(e.buddy3s),l=la(e),o=oa(e);let n=0,d=0,r=0,_=0;function b(C,g,M,de){const Fe=na[g]||0,Ma=a+a*s+a*l+a*Fe;let S=0;const Na=C==="無"?1.1:1;if(g.includes(C+"属性ダメージUP")?(g.includes("(極小)")&&(S=.025),g.includes("(小)")&&(S=.06),g.includes("(中)")&&(S=.105),g.includes("(大)")&&(S=.15),g.includes("(極大)")&&(S=.27)):g.includes("ダメージUP")&&!g.includes("属性ダメージUP")&&(g.includes("(極小)")&&(S=.0225),g.includes("(小)")&&(S=.05),g.includes("(中)")&&(S=.0875),g.includes("(大)")&&(S=.125),g.includes("(極大)")&&(S=.225)),g!=""&&Fe==0&&S==0)return;const E=Math.floor(Ma*(Na+o+S)*2.4);$[e.name]||($[e.name]=[],X[e.name]=[],Y[e.name]=[],Z[e.name]=[]);const P={無:{fire:1,water:1,flora:1,cosmic:1},火:{fire:1,water:.5,flora:1.5,cosmic:1},水:{fire:1.5,water:1,flora:.5,cosmic:1},木:{fire:.5,water:1.5,flora:1,cosmic:1}}[C]||{fire:1,water:1,flora:1,cosmic:1};n=Math.max(E*P.fire,n),d=Math.max(E*P.water,d),r=Math.max(E*P.flora,r),_=Math.max(E*P.cosmic,_),$[e.name].push({damage:E*P.fire,name:M,buffSource:de}),X[e.name].push({damage:E*P.water,name:M,buffSource:de}),Y[e.name].push({damage:E*P.flora,name:M,buffSource:de}),Z[e.name].push({damage:E*P.cosmic,name:M,buffSource:de})}b(e.magic2atr,"",ka(e.duo),""),F[e.duo].forEach(C=>{if(C.buffSource==="M3"){const g=k.value.find(M=>M.name===C.name);if(g&&(g.rare==="R"||g.rare==="SR"))return;if(y.value){const M=L.getHandCard(C.name);if(M.isOwned&&!M.isM3)return}}b(e.magic2atr,C.buff,C.name,C.buffSource)}),V[e.chara]||(V[e.chara]=0,B[e.chara]=0,R[e.chara]=0,H[e.chara]=0),V[e.chara]=Math.max(V[e.chara],n),B[e.chara]=Math.max(B[e.chara],d),R[e.chara]=Math.max(R[e.chara],r),H[e.chara]=Math.max(H[e.chara],_)})}we();function be(e){return e.includes("ATK")&&e.includes("小")?.2:e.includes("ATK")&&e.includes("中")?.35:0}function la(e){let a=e.rare==="SSR";if(y.value){const o=L.getHandCard(e.name);o.isOwned&&(a=o.isM3)}const t=Be(e,{allowM3:a}),s={極小:.1,小:.2,中:.35,大:.5,極大:.8};let l=0;return t.forEach(o=>{o.buffOption==="ATKUP"&&o.isSelf&&(o.durationTurns??0)>=2&&(l+=s[o.powerOption]||0)}),l}function oa(e){let a=e.rare==="SSR";if(y.value){const o=L.getHandCard(e.name);o.isOwned&&(a=o.isM3)}const t=Be(e,{allowM3:a}),s={極小:.02,小:.05,中:.0875,大:.125,極大:.1875};let l=0;return t.forEach(o=>{o.buffOption==="ダメージUP"&&o.isSelf&&(o.durationTurns??0)>=2&&(l+=s[o.powerOption]||0)}),(e.etc||"").includes("被ダメージUP(中)(相手全体/2T)")&&(l+=.0875),l}const ie={};k.value.forEach(e=>{e.rare=="SSR"&&(ie[e.chara]||(ie[e.chara]=[]),ie[e.chara].push(e.name))});const ne=p(!1),pe=p([]),ca=p(""),De=p("fire"),I=p(1),le=p(10),ra=A(()=>{const e=(I.value-1)*le.value,a=e+le.value;return pa.value.slice(e,a)}),Me=A(()=>Math.ceil(pe.value.length/le.value));function ua(e,a){const t=ke(a),s=ie[e];if(!s||s.length===0)return;const l=s.flatMap(o=>(t[o]||[]).map(d=>({...d,cardName:o})));pe.value=l,ca.value=e,De.value=a,I.value=1,ne.value=!0}const Ne=[{key:"hand-hand",finisherPlacement:"hand",bufferPlacement:"hand"},{key:"support-hand",finisherPlacement:"support",bufferPlacement:"hand"},{key:"hand-support",finisherPlacement:"hand",bufferPlacement:"support"}];function ke(e){return{fire:$,water:X,flora:Y,cosmic:Z}[e]}function da(e){switch(e){case"fire":return"settingModal.preset.fireBasicExam";case"water":return"settingModal.preset.waterBasicExam";case"flora":return"settingModal.preset.floraBasicExam";case"cosmic":return"settingModal.preset.neutralBasicExam"}}function oe(e){return D(e==="hand"?"finisherDamage.handCollection":"finisherDamage.supportLabel")}function fa(){try{const e=localStorage.getItem("characterLevels");he.value=e?JSON.parse(e):{}}catch(e){console.warn("Failed to load character levels from localStorage:",e),he.value={}}}function Ue(e){var s;const a=((s=k.value.find(l=>l.name===e))==null?void 0:s.level)??0,t=he.value[e]??0;return Math.max(a,t)}function xe(e){return!!e.bufferSource&&k.value.some(a=>a.name===e.bufferName)}function Le(e,a){return!!(a.finisherPlacement==="hand"&&Ue(e.finisherCardName)<=0||a.bufferPlacement==="hand"&&xe(e)&&Ue(e.bufferName)<=0)}function Ee(e){if(!e)return null;const a=k.value.find(s=>s.name===e);if(a)return a.chara;const t=Q.find(s=>s.name_ja===e||s.name_en===e);return(t==null?void 0:t.name_ja)||null}function ma(e){if(!e)return[];const a=k.value.find(s=>s.name===e);if(a)return[a.name];const t=Ee(e);return t?k.value.filter(s=>s.rare==="SSR"&&s.chara===t).map(s=>s.name):[]}function va(e){const a=k.value.find(s=>s.name===e);if(!a)return[];const t=[];return a.buddy1c&&a.buddy1s.includes("ATK")&&t.push(a.buddy1c),a.buddy2c&&a.buddy2s.includes("ATK")&&t.push(a.buddy2c),a.buddy3c&&a.buddy3s.includes("ATK")&&t.push(a.buddy3c),t}function ga(){k.value.forEach(e=>{e.required=!1})}function Pe(e){const a=k.value.find(t=>t.name===e);a&&(a.required=!0)}async function Te(e,a,t){if(!e.finisherCardName)return;const s=Ea(),l=Ba.find(b=>b.name===da(a));if(!l)return;ga();const o=new Set(va(e.finisherCardName));let n=[...s.selectedSupportCharacters];t.finisherPlacement==="hand"?Pe(e.finisherCardName):n=[e.finisherCardName];const d=Ee(e.bufferName),r=xe(e);if(t.bufferPlacement==="hand")r?Pe(e.bufferName):d&&o.add(d);else{const b=ma(r?e.bufferName:d||e.bufferName);b.length>0&&(n=b)}const _=Array.from(o);ea.updateSearchSettings({...s,...l.minSettings,sortOptions:l.sortOptions.map(b=>({...b})),attackNum:l.attackNum??s.attackNum,allowSameCharacter:!0,mustCharacters:_.map(b=>({prop:b})),convertedMustCharacters:_,selectedSupportCharacters:n}),await aa.push({name:"search",query:{openSettings:"1"}})}const W=p(""),J=p("desc");function ha(e){W.value===e?J.value=J.value==="asc"?"desc":"asc":(W.value=e,J.value="desc")}const ba=A(()=>{let e=[...Q];return W.value?e.sort((a,t)=>{const s=ce(a.name_ja,W.value),l=ce(t.name_ja,W.value),o=typeof s=="number"?s:0,n=typeof l=="number"?l:0;return J.value==="asc"?o-n:n-o}):e});function ce(e,a){var l;if(e==="全キャラ"){const o=ke(a);let n=0;return k.value.filter(d=>d.rare==="SSR").forEach(d=>{if(y.value&&!L.getHandCard(d.name).isOwned)return;const r=o[d.name]||[],_=Math.max(...r.map(b=>b.damage),0);n=Math.max(n,_)}),Math.floor(n)}if(y.value&&!k.value.filter(n=>n.rare==="SSR"&&n.chara===e).some(n=>L.getHandCard(n.name).isOwned))return"-";const s=(l={fire:V,water:B,flora:R,cosmic:H}[a])==null?void 0:l[e];return s?Math.floor(s):"-"}const pa=A(()=>[...pe.value].sort((e,a)=>a.damage-e.damage));function ka(e){const a=Q.find(t=>t.name_ja===e);return(a==null?void 0:a.name_en)||""}function q(e){if(!e)return;const a=v.value.get(e);a&&a.wikiUrl&&window.open(a.wikiUrl,"_blank")}const re=p(!1),Ce=p([]),Oe=p("fire"),z=p(1),ue=p(10),ee=p(0),ae=p(0),Ae=[1,1.0833,1.1666,1.25];function _e(){const t=window.innerHeight*.95-60,l=Math.max(1,Math.floor(t/80));le.value=l,ue.value=l}Re(()=>{_e(),window.addEventListener("resize",_e)}),Ka(()=>{window.removeEventListener("resize",_e)});const Ca=A(()=>{const e=(z.value-1)*ue.value,a=e+ue.value;return ya.value.slice(e,a)}),Ke=A(()=>Math.ceil(Ce.value.length/ue.value));function _a(e){Oe.value=e;const a=ke(e);Ce.value=k.value.filter(t=>t.rare==="SSR").flatMap(t=>(a[t.name]||[]).map(l=>({cardName:t.name,damage:l.damage,buffName:l.name||"",buffSource:l.buffSource||""}))),z.value=1,re.value=!0}const ya=A(()=>[...Ce.value].sort((e,a)=>a.damage-e.damage));function Ve(e){const a=k.value.find(s=>s.name===e);if(!a)return[];const t=[];return a.buddy1c&&a.buddy1s.includes("ATK")&&v.value.get(a.buddy1c)&&t.push(a.buddy1c),a.buddy2c&&a.buddy2s.includes("ATK")&&v.value.get(a.buddy2c)&&t.push(a.buddy2c),a.buddy3c&&a.buddy3s.includes("ATK")&&v.value.get(a.buddy3c)&&t.push(a.buddy3c),t}function Sa(){y.value=!y.value}He(()=>y.value,()=>{je()});function wa(){ee.value=(ee.value+1)%4}function Da(){ae.value=(ae.value+1)%4}function Ie(e){return{"background-color":["rgba(255, 235, 59, 0.1)","rgba(255, 235, 59, 0.3)","rgba(255, 235, 59, 0.6)","rgba(255, 235, 59, 0.9)"][e],color:"#999999","border-color":"#e0e0e0"}}function ze(e){return D(`finisherDamage.${["normal","critical1","critical2","critical3"][e]}`)}He(()=>L.handCollection,()=>{y.value&&je()},{deep:!0});function je(){ge.value||(Object.keys(V).forEach(e=>delete V[e]),Object.keys(B).forEach(e=>delete B[e]),Object.keys(R).forEach(e=>delete R[e]),Object.keys(H).forEach(e=>delete H[e]),Object.keys($).forEach(e=>delete $[e]),Object.keys(X).forEach(e=>delete X[e]),Object.keys(Y).forEach(e=>delete Y[e]),Object.keys(Z).forEach(e=>delete Z[e]),Se(),we())}return(e,a)=>(f(),te(Ra,{class:"finisher-container"},{default:u(()=>[ge.value?(f(),h("div",Ha,[c(Va,{indeterminate:"",color:"primary",size:64}),a[8]||(a[8]=i("p",{class:"loading-text"},"Loading...",-1))])):(f(),h(N,{key:1},[i("div",$a,[i("div",{class:"character-item",style:se({...ve.value})},[i("div",{class:Ia(["toggle-button",{active:y.value}]),onClick:Sa},m(y.value?T(D)("finisherDamage.handCollection"):T(D)("finisherDamage.allCards")),3)],4),i("div",Wa,[(f(),h(N,null,U(["Fire","Water","Flora","Cosmic"],t=>{var s;return i("div",{key:t,class:"damage-col"},[i("div",{class:"damage-item clickable-header",onClick:l=>ha(t.toLowerCase())},[i("div",Ga,[a[9]||(a[9]=i("span",{class:"vs-text"},"VS",-1)),i("img",{src:((s=v.value.get(t.toLowerCase()))==null?void 0:s.imgSrc)||"",alt:t,class:"element-icon"},null,8,Qa),i("span",Xa,[W.value===t.toLowerCase()?(f(),h("span",Ya,m(J.value==="asc"?"↑":"↓"),1)):(f(),h("span",Za,"↕"))])])],8,qa)])}),64))])]),i("div",Ja,[i("div",{class:"character-item",style:se({...ve.value})},[...a[10]||(a[10]=[i("div",{class:"all-characters-label"},"ALL",-1)])],4),i("div",et,[(f(),h(N,null,U(["Fire","Water","Flora","Cosmic"],t=>i("div",{key:t,class:"damage-col"},[i("div",at,[i("span",{class:"clickable-damage",onClick:s=>_a(t.toLowerCase())},m(ce("全キャラ",t.toLowerCase())),9,tt)])])),64))])]),(f(!0),h(N,null,U(ba.value,t=>{var s;return f(),h("div",{key:t.name_en,class:"character-row"},[i("div",{class:"character-item",style:se({...ve.value})},[c(j,{iconKey:t.name_ja,iconDictionary:K.value,wikiUrl:((s=v.value.get(t.name_ja))==null?void 0:s.wikiUrl)||"",iconSize:Ze},null,8,["iconKey","iconDictionary","wikiUrl"])],4),i("div",st,[(f(),h(N,null,U(["Fire","Water","Flora","Cosmic"],l=>i("div",{key:l,class:"damage-col"},[i("div",it,[i("span",{class:"clickable-damage",onClick:o=>ua(t.name_ja,l.toLowerCase())},m(ce(t.name_ja,l.toLowerCase())),9,nt)])])),64))])])}),128))],64)),c(Ge,{modelValue:ne.value,"onUpdate:modelValue":a[3]||(a[3]=t=>ne.value=t),"max-width":"450"},{default:u(()=>[c(Qe,null,{default:u(()=>[c(Ye,{class:"modal-content"},{default:u(()=>[c(fe,{class:"damage-list"},{default:u(()=>[(f(!0),h(N,null,U(ra.value,(t,s)=>(f(),te($e,{key:s,class:"damage-list-item"},{default:u(()=>{var l,o,n,d;return[i("div",lt,[i("div",ot,[c(j,{iconKey:t.cardName||"",iconDictionary:K.value,wikiUrl:((l=v.value.get(t.cardName||""))==null?void 0:l.wikiUrl)||"",cardType:((o=v.value.get(t.cardName||""))==null?void 0:o.type)||"",iconSize:46,class:"card-icon clickable-icon",onClick:r=>q(t.cardName)},null,8,["iconKey","iconDictionary","wikiUrl","cardType","onClick"]),t.cardName?(f(),h("div",ct,[(f(!0),h(N,null,U(Ve(t.cardName),r=>{var _,b;return f(),te(j,{key:r,iconKey:r,iconDictionary:K.value,wikiUrl:((_=v.value.get(r))==null?void 0:_.wikiUrl)||"",cardType:((b=v.value.get(r))==null?void 0:b.type)||"",iconSize:26,class:"buddy-icon clickable-icon",onClick:C=>q(r)},null,8,["iconKey","iconDictionary","wikiUrl","cardType","onClick"])}),128))])):G("",!0)]),t.name?(f(),h("div",rt,[i("div",ut,[c(j,{iconKey:t.name,iconDictionary:K.value,wikiUrl:((n=v.value.get(t.name))==null?void 0:n.wikiUrl)||"",cardType:((d=v.value.get(t.name))==null?void 0:d.type)||"",iconSize:46,class:"buff-icon clickable-icon",onClick:r=>q(t.name)},null,8,["iconKey","iconDictionary","wikiUrl","cardType","onClick"]),t.buffSource?(f(),h("span",dt,m(t.buffSource),1)):G("",!0)])])):G("",!0),i("div",ft,[i("div",mt,[i("span",null,m(Math.floor(t.damage*Ae[ee.value]).toLocaleString()),1),c(We,{location:"bottom end","content-class":"deck-search-menu-overlay"},{activator:u(({props:r})=>[c(x,qe({ref_for:!0},r,{variant:"text",size:"x-small",icon:"mdi-magnify",class:"deck-search-button"}),null,16)]),default:u(()=>[c(fe,{density:"compact",class:"deck-search-menu-list"},{default:u(()=>[i("div",vt,m(T(D)("finisherDamage.deckSearchDescription")),1),i("div",gt,[i("div",ht,[i("span",null,m(T(D)("finisherDamage.finisherLabel")),1),i("span",null,m(T(D)("finisherDamage.bufferLabel")),1),i("span",bt,[c(O,{size:"16"},{default:u(()=>[...a[11]||(a[11]=[w("mdi-magnify",-1)])]),_:1})])]),(f(),h(N,null,U(Ne,r=>i("button",{key:r.key,type:"button",class:"deck-search-table-row",disabled:Le({finisherCardName:t.cardName||"",bufferName:t.name,bufferSource:t.buffSource||""},r),onClick:_=>Te({finisherCardName:t.cardName||"",bufferName:t.name,bufferSource:t.buffSource||""},De.value,r)},[i("span",null,m(oe(r.finisherPlacement)),1),i("span",null,m(oe(r.bufferPlacement)),1),i("span",kt,[c(O,{size:"16"},{default:u(()=>[...a[12]||(a[12]=[w("mdi-magnify",-1)])]),_:1})])],8,pt)),64))])]),_:2},1024)]),_:2},1024)])])])]}),_:2},1024))),128))]),_:1})]),_:1}),c(Xe,null,{default:u(()=>[c(me),i("div",Ct,[c(x,{disabled:I.value===1,onClick:a[0]||(a[0]=t=>I.value--),variant:"text",size:"small",icon:""},{default:u(()=>[c(O,null,{default:u(()=>[...a[13]||(a[13]=[w("mdi-chevron-left",-1)])]),_:1})]),_:1},8,["disabled"]),i("span",_t,m(I.value)+" / "+m(Me.value),1),c(x,{disabled:I.value===Me.value,onClick:a[1]||(a[1]=t=>I.value++),variant:"text",size:"small",icon:""},{default:u(()=>[c(O,null,{default:u(()=>[...a[14]||(a[14]=[w("mdi-chevron-right",-1)])]),_:1})]),_:1},8,["disabled"])]),c(me),c(x,{variant:"outlined",class:"critical-btn",style:se(Ie(ee.value)),onClick:wa},{default:u(()=>[w(m(ze(ee.value)),1)]),_:1},8,["style"]),c(x,{color:"grey",variant:"outlined",class:"close-btn",onClick:a[2]||(a[2]=t=>ne.value=!1)},{default:u(()=>[...a[15]||(a[15]=[w("CLOSE",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),c(Ge,{modelValue:re.value,"onUpdate:modelValue":a[7]||(a[7]=t=>re.value=t),"max-width":"450"},{default:u(()=>[c(Qe,null,{default:u(()=>[c(Ye,{class:"modal-content"},{default:u(()=>[c(fe,{class:"damage-list"},{default:u(()=>[(f(!0),h(N,null,U(Ca.value,(t,s)=>(f(),te($e,{key:s,class:"damage-list-item"},{default:u(()=>{var l,o,n,d;return[i("div",yt,[i("div",St,[c(j,{iconKey:t.cardName,iconDictionary:K.value,wikiUrl:((l=v.value.get(t.cardName))==null?void 0:l.wikiUrl)||"",cardType:((o=v.value.get(t.cardName))==null?void 0:o.type)||"",iconSize:46,class:"card-icon clickable-icon",onClick:r=>q(t.cardName)},null,8,["iconKey","iconDictionary","wikiUrl","cardType","onClick"]),t.cardName?(f(),h("div",wt,[(f(!0),h(N,null,U(Ve(t.cardName),r=>{var _,b;return f(),te(j,{key:r,iconKey:r,iconDictionary:K.value,wikiUrl:((_=v.value.get(r))==null?void 0:_.wikiUrl)||"",cardType:((b=v.value.get(r))==null?void 0:b.type)||"",iconSize:26,class:"buddy-icon clickable-icon",onClick:C=>q(r)},null,8,["iconKey","iconDictionary","wikiUrl","cardType","onClick"])}),128))])):G("",!0)]),t.buffName?(f(),h("div",Dt,[i("div",Mt,[c(j,{iconKey:t.buffName,iconDictionary:K.value,wikiUrl:((n=v.value.get(t.buffName))==null?void 0:n.wikiUrl)||"",cardType:((d=v.value.get(t.buffName))==null?void 0:d.type)||"",iconSize:46,class:"buff-icon clickable-icon",onClick:r=>q(t.buffName)},null,8,["iconKey","iconDictionary","wikiUrl","cardType","onClick"]),t.buffSource?(f(),h("span",Nt,m(t.buffSource),1)):G("",!0)])])):G("",!0),i("div",Ut,[i("div",xt,[i("span",null,m(Math.floor(t.damage*Ae[ae.value]).toLocaleString()),1),c(We,{location:"bottom end","content-class":"deck-search-menu-overlay"},{activator:u(({props:r})=>[c(x,qe({ref_for:!0},r,{variant:"text",size:"x-small",icon:"mdi-magnify",class:"deck-search-button"}),null,16)]),default:u(()=>[c(fe,{density:"compact",class:"deck-search-menu-list"},{default:u(()=>[i("div",Lt,m(T(D)("finisherDamage.deckSearchDescription")),1),i("div",Et,[i("div",Pt,[i("span",null,m(T(D)("finisherDamage.finisherLabel")),1),i("span",null,m(T(D)("finisherDamage.bufferLabel")),1),i("span",Tt,[c(O,{size:"16"},{default:u(()=>[...a[16]||(a[16]=[w("mdi-magnify",-1)])]),_:1})])]),(f(),h(N,null,U(Ne,r=>i("button",{key:r.key,type:"button",class:"deck-search-table-row",disabled:Le({finisherCardName:t.cardName,bufferName:t.buffName,bufferSource:t.buffSource||""},r),onClick:_=>Te({finisherCardName:t.cardName,bufferName:t.buffName,bufferSource:t.buffSource||""},Oe.value,r)},[i("span",null,m(oe(r.finisherPlacement)),1),i("span",null,m(oe(r.bufferPlacement)),1),i("span",At,[c(O,{size:"16"},{default:u(()=>[...a[17]||(a[17]=[w("mdi-magnify",-1)])]),_:1})])],8,Ot)),64))])]),_:2},1024)]),_:2},1024)])])])]}),_:2},1024))),128))]),_:1})]),_:1}),c(Xe,null,{default:u(()=>[c(me),i("div",Kt,[c(x,{disabled:z.value===1,onClick:a[4]||(a[4]=t=>z.value--),variant:"text",size:"small",icon:""},{default:u(()=>[c(O,null,{default:u(()=>[...a[18]||(a[18]=[w("mdi-chevron-left",-1)])]),_:1})]),_:1},8,["disabled"]),i("span",Vt,m(z.value)+" / "+m(Ke.value),1),c(x,{disabled:z.value===Ke.value,onClick:a[5]||(a[5]=t=>z.value++),variant:"text",size:"small",icon:""},{default:u(()=>[c(O,null,{default:u(()=>[...a[19]||(a[19]=[w("mdi-chevron-right",-1)])]),_:1})]),_:1},8,["disabled"])]),c(me),c(x,{variant:"outlined",class:"critical-btn",style:se(Ie(ae.value)),onClick:Da},{default:u(()=>[w(m(ze(ae.value)),1)]),_:1},8,["style"]),c(x,{color:"grey",variant:"outlined",class:"close-btn",onClick:a[6]||(a[6]=t=>re.value=!1)},{default:u(()=>[...a[20]||(a[20]=[w("CLOSE",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),Jt=ja(zt,[["__scopeId","data-v-17882987"]]);export{Jt as default};
