import{I as ce,aI as ve,J as pe,aO as fe,L as he,a5 as ge,aP as Ee,aD as be,e as J,O as ye,aK as Ve,aL as ee,aQ as te,h as g,P as ae,as as Pe,r as _,d as Re,i as Ae,y as le,D as Se,v as ke,C as n,aR as De,o as c,j as v,a as u,w as j,b as I,t as L,u as b,l as C,F as y,k as V,aS as ne,at as Oe,p as Me,n as Te,_ as je}from"./index-e1c53736.js";import{_ as Ie}from"./VDialog-19a07b37.js";import{u as Le}from"./characters-d50a2ce9.js";const Ce=ce({...ve(),...pe(fe(),["inline"])},"VCheckbox"),$=he()({name:"VCheckbox",inheritAttrs:!1,props:Ce(),emits:{"update:modelValue":r=>!0,"update:focused":r=>!0},setup(r,R){let{attrs:l,slots:P}=R;const E=ge(r,"modelValue"),{isFocused:A,focus:S,blur:k}=Ee(r),D=be(),O=J(()=>r.id||`checkbox-${D}`);return ye(()=>{const[M,w]=Ve(l),[i,p]=ee.filterProps(r),[f,d]=te.filterProps(r);return g(ee,ae({class:["v-checkbox",r.class]},M,i,{modelValue:E.value,"onUpdate:modelValue":m=>E.value=m,id:O.value,focused:A.value,style:r.style}),{...P,default:m=>{let{id:z,messagesId:W,isDisabled:G,isReadonly:x}=m;return g(te,ae(f,{id:z.value,"aria-describedby":W.value,disabled:G.value,readonly:x.value},w,{modelValue:E.value,"onUpdate:modelValue":F=>E.value=F,onFocus:S,onBlur:k}),P)}})}),{}}}),we=Pe("filterd",()=>{const r=_([]),R=_([]),l=_(!0),P=_([]),E=_([]),A=_([]);return{tempSelectedCharacters:r,tempSelectedRare:R,isFirst:l,tempSelectedType:P,tempSelectedAttr:E,tempSelectedEffects:A}}),q=[{name_ja:"リドル",name_en:"riddle",dorm:"ハーツラビュル",theme_1:"スタイリッシュ",theme_2:"ユニーク"},{name_ja:"エース",name_en:"ace",dorm:"ハーツラビュル",theme_1:"ユニーク",theme_2:"スタイリッシュ"},{name_ja:"デュース",name_en:"deuce",dorm:"ハーツラビュル",theme_1:"ベーシック",theme_2:"エレガント"},{name_ja:"トレイ",name_en:"trey",dorm:"ハーツラビュル",theme_1:"エレガント",theme_2:"ポップ"},{name_ja:"ケイト",name_en:"cater",dorm:"ハーツラビュル",theme_1:"ポップ",theme_2:"ベーシック"},{name_ja:"レオナ",name_en:"leona",dorm:"サバナクロー",theme_1:"エレガント",theme_2:"ユニーク"},{name_ja:"ジャック",name_en:"jack",dorm:"サバナクロー",theme_1:"ベーシック",theme_2:"スタイリッシュ"},{name_ja:"ラギー",name_en:"ruggie",dorm:"サバナクロー",theme_1:"ポップ",theme_2:"ベーシック"},{name_ja:"アズール",name_en:"azul",dorm:"オクタヴィネル",theme_1:"エレガント",theme_2:"スタイリッシュ"},{name_ja:"ジェイド",name_en:"jade",dorm:"オクタヴィネル",theme_1:"スタイリッシュ",theme_2:"ベーシック"},{name_ja:"フロイド",name_en:"floyd",dorm:"オクタヴィネル",theme_1:"ユニーク",theme_2:"ポップ"},{name_ja:"カリム",name_en:"kalim",dorm:"スカラビア",theme_1:"ポップ",theme_2:"ユニーク"},{name_ja:"ジャミル",name_en:"jamil",dorm:"スカラビア",theme_1:"スタイリッシュ",theme_2:"エレガント"},{name_ja:"ヴィル",name_en:"vil",dorm:"ポムフィオーレ",theme_1:"エレガント",theme_2:"スタイリッシュ"},{name_ja:"エペル",name_en:"epel",dorm:"ポムフィオーレ",theme_1:"ベーシック",theme_2:"ポップ"},{name_ja:"ルーク",name_en:"rook",dorm:"ポムフィオーレ",theme_1:"ユニーク",theme_2:"エレガント"},{name_ja:"イデア",name_en:"idia",dorm:"イグニハイド",theme_1:"ユニーク",theme_2:"エレガント"},{name_ja:"オルト",name_en:"ortho",dorm:"イグニハイド",theme_1:"ユニーク",theme_2:"ポップ"},{name_ja:"マレウス",name_en:"malleus",dorm:"ディアソムニア",theme_1:"スタイリッシュ",theme_2:"ベーシック"},{name_ja:"シルバー",name_en:"silver",dorm:"ディアソムニア",theme_1:"ベーシック",theme_2:"エレガント"},{name_ja:"セベク",name_en:"sebek",dorm:"ディアソムニア",theme_1:"スタイリッシュ",theme_2:"ユニーク"},{name_ja:"リリア",name_en:"lilia",dorm:"ディアソムニア",theme_1:"ポップ",theme_2:"ユニーク"},{name_ja:"グリム",name_en:"grim",dorm:"ナイトレイブンカレッジ",theme_1:"ポップ",theme_2:"ベーシック"},{name_ja:"クロウリー",name_en:"crowley",dorm:"ナイトレイブンカレッジ",theme_1:"スタイリッシュ",theme_2:"ベーシック"},{name_ja:"クルーウェル",name_en:"crewel",dorm:"ナイトレイブンカレッジ",theme_1:"エレガント",theme_2:"スタイリッシュ"},{name_ja:"ロロ",name_en:"rollo",dorm:"スペシャル",theme_1:"エレガント",theme_2:"スタイリッシュ"},{name_ja:"フェロー",name_en:"fellow",dorm:"スペシャル",theme_1:"ユニーク",theme_2:"ポップ"}],ie=r=>(Me("data-v-4c1b7a0c"),r=r(),Te(),r),We={class:"modal-background",ref:"modalContainer"},xe={class:"feature-select-all-container"},Fe={class:"feature-items"},Ue=ie(()=>u("hr",{class:"rare-divider"},null,-1)),Be={class:"display-block"},$e={class:"character-list-wrapper"},ze={class:"character-select-all-container"},Ge={class:"character-items"},He=["onClick"],Ke=["src","alt"],Ne=ie(()=>u("hr",{class:"rare-divider"},null,-1)),qe={class:"feature-select-all-container"},Je={class:"feature-items"},Qe={class:"button-container"},se=50,oe=10,Xe=Re({__name:"FilterModal",emits:["close"],setup(r,{emit:R}){const{t:l}=Ae(),P=Le(),{characters:E}=le(P),A=we(),{tempSelectedCharacters:S,tempSelectedRare:k,tempSelectedType:D,tempSelectedAttr:O,tempSelectedEffects:M,isFirst:w}=le(A),i=_([]),p=_([]),f=_([]),d=_([]),m=_([]),z=R,W=_(0),G=_({"--icon-size":`${se}px`,"--gap-size":`${oe}px`}),x=["SSR","SR","R"],F=J(()=>[{name:l("filterModal.balance"),value:"バランス"},{name:l("filterModal.defence"),value:"ディフェンス"},{name:l("filterModal.attack"),value:"アタック"}]),Q=J(()=>[{name:l("filterModal.fire"),value:"火"},{name:l("filterModal.water"),value:"水"},{name:l("filterModal.flora"),value:"木"},{name:l("filterModal.cosmic"),value:"無"}]),U=[{name:l("filterModal.power_boost"),value:"ATKUP"},{name:l("filterModal.damage_boost"),value:"ダメージUP"},{name:l("filterModal.critical"),value:"クリティカル"},{name:l("filterModal.element_boost"),value:"属性ダメージUP"},{name:l("filterModal.damage_vulnerability"),value:"被ダメージUP"},{name:l("filterModal.power_cut"),value:"ATKDOWN"},{name:l("filterModal.damage_cut"),value:"ダメージDOWN"},{name:l("filterModal.evasion"),value:"回避"},{name:l("filterModal.element_cut"),value:"属性ダメージDOWN"},{name:l("filterModal.resistence"),value:"被ダメージDOWN"},{name:l("filterModal.hp_restoration"),value:"HP回復"},{name:l("filterModal.hp_regen"),value:"HP継続回復"},{name:l("filterModal.nullifies_blind"),value:"暗闇無効"},{name:l("filterModal.nullifies_curse"),value:"呪い無効"},{name:l("filterModal.nullifies_freeze"),value:"凍結無効"},{name:l("filterModal.debuff_removal"),value:"デバフ解除"},{name:l("filterModal.curse"),value:"呪い"}],T=q.reduce((e,a)=>{const t=a.dorm;return e[t]||(e[t]=[]),e[t].push(a),e},{}),X=()=>{const e=document.querySelector(".display-block");e&&(W.value=e.clientWidth)},Y=()=>{X()};Se(()=>{w.value?(i.value=Object.values(T).flat().map(e=>e.name_en),p.value=["SSR","SR","R"],f.value=["バランス","ディフェンス","アタック"],d.value=["火","水","木","無"],m.value=["ATKUP","ダメージUP","クリティカル","属性ダメージUP","被ダメージUP","ATKDOWN","ダメージDOWN","回避","属性ダメージDOWN","被ダメージDOWN","HP回復","HP継続回復","暗闇無効","呪い無効","凍結無効","デバフ解除","呪い"]):(S.value.length>0&&(i.value=[...S.value]),k.value.length>0&&(p.value=[...k.value]),D.value.length>0&&(f.value=[...D.value]),O.value.length>0&&(d.value=[...O.value]),M.value.length>0&&(m.value=[...M.value])),w.value=!1,X(),window.addEventListener("resize",Y)});const H=_({});ke(()=>{Array.from(q).map(a=>Ie(Object.assign({"../assets/img/icon/ace.png":()=>n(()=>import("./ace-34f83527.js"),[],import.meta.url),"../assets/img/icon/azul.png":()=>n(()=>import("./azul-104d0980.js"),[],import.meta.url),"../assets/img/icon/cater.png":()=>n(()=>import("./cater-b85b6103.js"),[],import.meta.url),"../assets/img/icon/crewel.png":()=>n(()=>import("./crewel-6ab42db2.js"),[],import.meta.url),"../assets/img/icon/crowley.png":()=>n(()=>import("./crowley-fd99c5d0.js"),[],import.meta.url),"../assets/img/icon/deuce.png":()=>n(()=>import("./deuce-2352262f.js"),[],import.meta.url),"../assets/img/icon/epel.png":()=>n(()=>import("./epel-0faa9669.js"),[],import.meta.url),"../assets/img/icon/fellow.png":()=>n(()=>import("./fellow-a00d75c7.js"),[],import.meta.url),"../assets/img/icon/floyd.png":()=>n(()=>import("./floyd-368ab9db.js"),[],import.meta.url),"../assets/img/icon/grim.png":()=>n(()=>import("./grim-724f2176.js"),[],import.meta.url),"../assets/img/icon/idia.png":()=>n(()=>import("./idia-31cb1427.js"),[],import.meta.url),"../assets/img/icon/jack.png":()=>n(()=>import("./jack-23267685.js"),[],import.meta.url),"../assets/img/icon/jade.png":()=>n(()=>import("./jade-561d2cbc.js"),[],import.meta.url),"../assets/img/icon/jamil.png":()=>n(()=>import("./jamil-34a1eb2e.js"),[],import.meta.url),"../assets/img/icon/kalim.png":()=>n(()=>import("./kalim-65c834c5.js"),[],import.meta.url),"../assets/img/icon/leona.png":()=>n(()=>import("./leona-536d417e.js"),[],import.meta.url),"../assets/img/icon/lilia.png":()=>n(()=>import("./lilia-7ddfbf2f.js"),[],import.meta.url),"../assets/img/icon/malleus.png":()=>n(()=>import("./malleus-d8a8aef9.js"),[],import.meta.url),"../assets/img/icon/ortho.png":()=>n(()=>import("./ortho-b307a73d.js"),[],import.meta.url),"../assets/img/icon/riddle.png":()=>n(()=>import("./riddle-bb106fb0.js"),[],import.meta.url),"../assets/img/icon/rollo.png":()=>n(()=>import("./rollo-abfad1a5.js"),[],import.meta.url),"../assets/img/icon/rook.png":()=>n(()=>import("./rook-08b4c270.js"),[],import.meta.url),"../assets/img/icon/ruggie.png":()=>n(()=>import("./ruggie-825bc723.js"),[],import.meta.url),"../assets/img/icon/sebek.png":()=>n(()=>import("./sebek-d7f9f410.js"),[],import.meta.url),"../assets/img/icon/silver.png":()=>n(()=>import("./silver-6b693d48.js"),[],import.meta.url),"../assets/img/icon/trey.png":()=>n(()=>import("./trey-16a59558.js"),[],import.meta.url),"../assets/img/icon/vil.png":()=>n(()=>import("./vil-5fff0695.js"),[],import.meta.url)}),`../assets/img/icon/${a.name_en}.png`).then(t=>{H.value[a.name_en]=t.default}).catch(()=>{H.value[a.name_en]=""}))}),De(()=>{window.removeEventListener("resize",Y)});function re(){S.value=[...i.value],k.value=[...p.value],D.value=[...f.value],O.value=[...d.value],M.value=[...m.value],E.value.forEach(e=>{if(!p.value.includes(e.rare)){e.visible=!1;return}const a=q.find(t=>t.name_ja===e.chara||t.name_en===e.chara);if(!a||!i.value.includes(a.name_en)){e.visible=!1;return}if(!f.value.includes(e.attr)){e.visible=!1;return}if(!d.value.includes(e.magic1atr)&&!d.value.includes(e.magic2atr)&&!d.value.includes(e.magic3atr)){e.visible=!1;return}if(m.value.length===17)e.visible=!0;else if(!m.value.some(s=>e.etc.includes(s))){e.visible=!1;return}}),z("close")}function K(e){if(e==="statusEffects")U.every(t=>m.value.includes(t.value))?m.value=[]:m.value=U.map(t=>t.value);else if(e==="cardAttributes"){const a=["SSR","SR","R"].every(o=>p.value.includes(o)),t=["バランス","ディフェンス","アタック"].every(o=>f.value.includes(o)),s=["火","水","木","無"].every(o=>d.value.includes(o));a&&t&&s?(p.value=[],f.value=[],d.value=[]):(p.value=["SSR","SR","R"],f.value=["バランス","ディフェンス","アタック"],d.value=["火","水","木","無"])}else{const a=T[e]||[];a.every(s=>i.value.includes(s.name_en))?i.value=i.value.filter(s=>!a.some(o=>o.name_en===s)):i.value=[...new Set([...i.value,...a.map(s=>s.name_en)])]}}function N(e){return e==="cardAttributes"?x.every(t=>p.value.includes(t))&&F.value.every(t=>f.value.includes(t.value))&&Q.value.every(t=>d.value.includes(t.value)):e==="statusEffects"?U.every(t=>m.value.includes(t.value)):T[e].every(t=>i.value.includes(t.name_en))}function me(e){i.value=i.value.includes(e)?i.value.filter(a=>a!==e):[...i.value,e]}const ue=e=>64+(se+10+oe)*e.length+10,_e=e=>({width:e===1?"100%":"50%"}),de=()=>{const e=[];let a=[],t=0;const s=W.value,o=2;return Object.entries(T).forEach(([h,Z])=>{const B=ue(Z);B>=s/o?(a.length>0&&(e.push(a),a=[],t=0),e.push([h])):t+B<=s&&a.length<o?(a.push(h),t+=B):(e.push(a),a=[h],t=B)}),a.length>0&&e.push(a),e};return(e,a)=>(c(),v("div",We,[u("div",xe,[g(C,{small:"",onClick:a[0]||(a[0]=t=>K("cardAttributes"))},{default:j(()=>[I(L(N("cardAttributes")?b(l)("filterModal.release"):b(l)("filterModal.select")),1)]),_:1}),u("div",Fe,[(c(),v(y,null,V(x,(t,s)=>u("div",{class:"feature-item",key:`rare-${s}`},[g($,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=o=>p.value=o),value:t,label:t,"hide-details":""},null,8,["modelValue","value","label"])])),64)),(c(!0),v(y,null,V(F.value,(t,s)=>(c(),v("div",{class:"feature-item",key:`type-${s}`},[g($,{modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=o=>f.value=o),value:t.value,label:t.name,"hide-details":""},null,8,["modelValue","value","label"])]))),128)),(c(!0),v(y,null,V(Q.value,(t,s)=>(c(),v("div",{class:"feature-item",key:`attr-${s}`},[g($,{modelValue:d.value,"onUpdate:modelValue":a[3]||(a[3]=o=>d.value=o),value:t.value,label:t.name,"hide-details":""},null,8,["modelValue","value","label"])]))),128))])]),Ue,u("div",Be,[u("div",$e,[(c(!0),v(y,null,V(de(),(t,s)=>(c(),v("div",{key:s,class:"row"},[(c(!0),v(y,null,V(t,o=>(c(),v("div",{key:o,style:ne(_e(t.length)),class:"character-list"},[u("div",ze,[g(C,{small:"",onClick:h=>K(o)},{default:j(()=>[I(L(N(o)?b(l)("filterModal.release"):b(l)("filterModal.select")),1)]),_:2},1032,["onClick"]),u("div",Ge,[(c(!0),v(y,null,V(b(T)[o],h=>(c(),v("div",{key:h.name_en,class:Oe(["character-item",{selected:i.value.includes(h.name_en)}]),onClick:Z=>me(h.name_en),style:ne({...G.value,opacity:i.value.includes(h.name_en)?1:.5})},[u("img",{src:H.value[h.name_en],alt:h.name_en,class:"character-image"},null,8,Ke)],14,He))),128))])])],4))),128))]))),128))])]),Ne,u("div",qe,[g(C,{small:"",onClick:a[4]||(a[4]=t=>K("statusEffects"))},{default:j(()=>[I(L(N("statusEffects")?b(l)("filterModal.release"):b(l)("filterModal.select")),1)]),_:1}),u("div",Je,[(c(),v(y,null,V(U,t=>u("div",{key:t.name,class:"feature-item"},[g($,{modelValue:m.value,"onUpdate:modelValue":a[5]||(a[5]=s=>m.value=s),value:t.value,label:t.name,"hide-details":""},null,8,["modelValue","value","label"])])),64))])]),u("div",Qe,[g(C,{class:"button",onClick:a[6]||(a[6]=t=>e.$emit("close"))},{default:j(()=>[I(L(e.$t("filterModal.cancel")),1)]),_:1}),g(C,{class:"button apply-button",disabled:i.value.length===0||p.value.length===0,onClick:re},{default:j(()=>[I(L(e.$t("filterModal.submit")),1)]),_:1},8,["disabled"])])],512))}});const tt=je(Xe,[["__scopeId","data-v-4c1b7a0c"]]);export{tt as F,$ as V};
