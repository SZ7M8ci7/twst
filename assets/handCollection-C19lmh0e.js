import{I as v,bf as H,r as S,g as l}from"./index-DY2Y4-0b.js";const c="twst-hand-collection";function w(t){return{characterName:"",cardName:t,isOwned:!1,level:0,isLimitBreak:!1,isM3:!1}}function k(){try{const t=localStorage.getItem(c);return t?JSON.parse(t):{}}catch(t){return console.warn("Failed to load hand collection from localStorage:",t),{}}}function p(t){try{localStorage.setItem(c,JSON.stringify(t))}catch(e){console.warn("Failed to save hand collection to localStorage:",e)}}const L=v("handCollection",()=>{const t=H(k()),e=S(!1);let i=0;function r(n){return t[n]||(t[n]=w(n)),t[n]}function d(n,o){const s=r(n);Object.assign(s,o),"isLimitBreak"in o&&o.isLimitBreak&&(s.isM3=!0)}function u(n){return r(n).isOwned}const a=l(()=>Object.values(t).filter(n=>n.isOwned));function f(n){e.value=n}function C(){i++}function h(){return i===0}function g(){p(t)}const O=l(()=>a.value.length>0),m=l(()=>({totalCards:Object.keys(t).length,ownedCardsCount:a.value.length,limitBreakCardsCount:a.value.filter(n=>n.isLimitBreak).length,m3CardsCount:a.value.filter(n=>n.isM3).length}));return{handCollection:t,useHandCollection:e,ownedCards:a,hasAnyHandSettings:O,stats:m,getHandCard:r,updateHandCard:d,isCharacterOwned:u,setUseHandCollection:f,saveHandCollectionManually:g,incrementModalOpenCount:C,isFirstModalOpen:h}});export{L as useHandCollectionStore};
