import{I as N,S as P,E as D,V as M,a as j,b as H,c as R,R as L}from"./ResultBody-DiM759Gd.js";import{F as q}from"./FilterModal-Cz-PHKnm.js";import{d as U,i as z,a1 as A,a2 as G,j as T,f as e,w as t,l as v,b as d,t as r,u as S,a3 as J,F as K,r as m,g as _,a4 as O,o as x,a7 as Q,c as X,a as Y}from"./index-8F7jzfPQ.js";import{u as Z,a as ee,b as ae}from"./common-3estsuLC.js";import{a as y,V as o}from"./VRow-Cx1BbuS3.js";import{V as k}from"./characters_info-BDBd58ya.js";import{V as te}from"./VCardText-Dqsg0E1n.js";import{V as le}from"./VContainer-swy9lxFO.js";import"./VRadioGroup-XSSOrrZs.js";import"./default-pkSoNB1x.js";import"./VCheckbox-BjhjSHwO.js";const se={key:0},oe=U({__name:"SearchHeader2",emits:["search-started"],setup(W,{emit:g}){const{t:n}=z(),C=Z(),{totalResults:f,nowResults:i,isSearching:u,errorMessage:c}=A(C),V=m(!1),p=m(!1),h=m(!1),w=m(!1),b=_(()=>{const a=window.innerWidth*.8;return a<600?`${a}px`:"1200px"}),B=_(()=>(i.value/f.value*100).toFixed(1)),F=g;let $=0;async function I(){if(u.value)return;const s=++$;u.value=!0,F("search-started"),O("search start"),await new Promise(a=>setTimeout(a,300));try{await ee(n)}finally{s===$&&(u.value=!1)}}function E(){$+=1,u.value=!1}return G(c,(s,a)=>{s!==""&&(w.value=!0)}),(s,a)=>(x(),T(K,null,[e(y,{class:"mb-1"},{default:t(()=>[e(o,{cols:"12",sm:"3"}),e(o,{cols:"12",sm:"2"},{default:t(()=>[e(v,{block:"",onClick:a[0]||(a[0]=l=>p.value=!0)},{default:t(()=>[d(r(s.$t("search.filter")),1)]),_:1})]),_:1}),e(o,{cols:"12",sm:"2"},{default:t(()=>[e(v,{block:"",onClick:a[1]||(a[1]=l=>h.value=!0)},{default:t(()=>[d(r(s.$t("search.settings")),1)]),_:1})]),_:1}),e(o,{cols:"12",sm:"2"},{default:t(()=>[e(v,{block:"",onClick:a[2]||(a[2]=l=>V.value=!0)},{default:t(()=>[d(r(s.$t("search.howToUse")),1)]),_:1})]),_:1}),e(o,{cols:"12",sm:"3"})]),_:1}),e(y,{class:"mb-1"},{default:t(()=>[e(o,{cols:"12",sm:"3"}),e(o,{cols:"12",sm:"2"},{default:t(()=>[e(v,{block:"",color:"red",onClick:E},{default:t(()=>[d(r(s.$t("search.cancelSearch")),1)]),_:1})]),_:1}),e(o,{cols:"12",sm:"2"},{default:t(()=>[e(v,{block:"",color:"green",onClick:I},{default:t(()=>[d(r(s.$t("search.startSearch")),1)]),_:1})]),_:1}),e(o,{cols:"12",sm:"2"},{default:t(()=>[S(f)&&S(i)?(x(),T("span",se,r(S(i))+"/"+r(S(f))+" ("+r(B.value)+"%)",1)):J("",!0)]),_:1}),e(o,{cols:"12",sm:"3"})]),_:1}),e(k,{modelValue:V.value,"onUpdate:modelValue":a[4]||(a[4]=l=>V.value=l),persistent:"","max-width":b.value},{default:t(()=>[e(N,{onClose:a[3]||(a[3]=l=>V.value=!1)})]),_:1},8,["modelValue","max-width"]),e(k,{modelValue:p.value,"onUpdate:modelValue":a[6]||(a[6]=l=>p.value=l),persistent:"","max-width":b.value},{default:t(()=>[e(q,{onClose:a[5]||(a[5]=l=>p.value=!1)})]),_:1},8,["modelValue","max-width"]),e(k,{modelValue:h.value,"onUpdate:modelValue":a[8]||(a[8]=l=>h.value=l),persistent:"","max-width":b.value},{default:t(()=>[e(P,{onClose:a[7]||(a[7]=l=>h.value=!1)})]),_:1},8,["modelValue","max-width"]),e(k,{modelValue:w.value,"onUpdate:modelValue":a[10]||(a[10]=l=>w.value=l),persistent:"","max-width":b.value},{default:t(()=>[e(D,{onClose:a[9]||(a[9]=l=>w.value=!1)})]),_:1},8,["modelValue","max-width"])],64))}}),he=U({__name:"search2",setup(W){const g=ae(),n=m("search"),C=m(!1),f=()=>{n.value="result",C.value=!0};return Q(()=>{g.handlePageChange("searchPage")}),(i,u)=>(x(),X(le,{style:{"min-width":"80%"}},{default:t(()=>[Y("div",null,[e(oe,{onSearchStarted:f})]),e(j,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=c=>n.value=c),color:"indigo-darken-2","fixed-tabs":"","show-arrows":!1,"mobile-breakpoint":1/0},{default:t(()=>[e(M,{value:"search"},{default:t(()=>[d(r(i.$t("search.characterList")),1)]),_:1}),e(M,{value:"result"},{default:t(()=>[d(r(i.$t("search.result")),1)]),_:1})]),_:1},8,["modelValue"]),e(te,null,{default:t(()=>[e(H,{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=c=>n.value=c),disabled:""},{default:t(()=>[e(R,{value:"search"}),e(R,{value:"result"},{default:t(()=>[e(L)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});export{he as default};
