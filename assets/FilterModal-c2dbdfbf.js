import{u as ve}from"./characters-d561eb67.js";import{J as fe,aH as me,K as pe,aN as _e,M as be,a6 as he,aO as ye,aC as Se,e as N,P as Me,aJ as ke,aK as Z,aP as ee,h as b,Q as le,G as ge,r as d,d as Ve,i as Ce,v as te,C as Pe,aQ as Re,o as v,j as f,a as r,w as x,b as U,t as F,u as y,l as B,F as S,k as M,aR as ae,at as We,p as we,n as Ae,_ as xe}from"./index-21d7409e.js";import{c as j}from"./characters_info-6ae83e71.js";import{f as Ue}from"./common-15b32ab6.js";const Fe=fe({...me(),...pe(_e(),["inline"])},"VCheckbox"),I=be()({name:"VCheckbox",inheritAttrs:!1,props:Fe(),emits:{"update:modelValue":o=>!0,"update:focused":o=>!0},setup(o,g){let{attrs:a,slots:k}=g;const h=he(o,"modelValue"),{isFocused:V,focus:C,blur:P}=ye(o),R=Se(),W=N(()=>o.id||`checkbox-${R}`);return Me(()=>{const[w,$]=ke(a),[u,m]=Z.filterProps(o),[p,c]=ee.filterProps(o);return b(Z,le({class:["v-checkbox",o.class]},w,u,{modelValue:h.value,"onUpdate:modelValue":i=>h.value=i,id:W.value,focused:V.value,style:o.style}),{...k,default:i=>{let{id:G,messagesId:O,isDisabled:D,isReadonly:K}=i;return b(ee,le(p,{id:G.value,"aria-describedby":O.value,disabled:D.value,readonly:K.value},$,{modelValue:h.value,"onUpdate:modelValue":E=>h.value=E,onFocus:C,onBlur:P}),k)}})}),{}}}),Be=ge("filterd",()=>{const o=d([]),g=d([]),a=d(!0),k=d([]),h=d([]),V=d([]);return{tempSelectedCharacters:o,tempSelectedRare:g,isFirst:a,tempSelectedType:k,tempSelectedAttr:h,tempSelectedEffects:V}}),ue=o=>(we("data-v-39b83784"),o=o(),Ae(),o),$e={class:"modal-background",ref:"modalContainer"},Oe={class:"feature-select-all-container"},De={class:"feature-items"},Ee=ue(()=>r("hr",{class:"rare-divider"},null,-1)),Te={class:"display-block"},ze={class:"character-list-wrapper"},Ie={class:"character-select-all-container"},Ge={class:"character-items"},Ke=["onClick"],He=["src","alt"],Le=ue(()=>r("hr",{class:"rare-divider"},null,-1)),je={class:"feature-select-all-container"},Ne={class:"feature-items"},Je={class:"button-container"},se=50,ne=10,Qe=Ve({__name:"FilterModal",emits:["close"],setup(o,{emit:g}){const{t:a}=Ce(),k=ve(),{characters:h}=te(k),V=Be(),{tempSelectedCharacters:C,tempSelectedRare:P,tempSelectedType:R,tempSelectedAttr:W,tempSelectedEffects:w,isFirst:$}=te(V),u=d([]),m=d([]),p=d([]),c=d([]),i=d([]),G=g,O=d(0),D=d({}),K=d({"--icon-size":`${se}px`,"--gap-size":`${ne}px`}),E=["SSR","SR","R"],J=N(()=>[{name:a("filterModal.balance"),value:"バランス"},{name:a("filterModal.defence"),value:"ディフェンス"},{name:a("filterModal.attack"),value:"アタック"}]),Q=N(()=>[{name:a("filterModal.fire"),value:"火"},{name:a("filterModal.water"),value:"水"},{name:a("filterModal.flora"),value:"木"},{name:a("filterModal.cosmic"),value:"無"}]),T=[{name:a("filterModal.power_boost"),value:"ATKUP"},{name:a("filterModal.damage_boost"),value:"ダメージUP"},{name:a("filterModal.critical"),value:"クリティカル"},{name:a("filterModal.element_boost"),value:"属性ダメージUP"},{name:a("filterModal.damage_vulnerability"),value:"被ダメージUP"},{name:a("filterModal.power_cut"),value:"ATKDOWN"},{name:a("filterModal.damage_cut"),value:"ダメージDOWN"},{name:a("filterModal.evasion"),value:"回避"},{name:a("filterModal.element_cut"),value:"属性ダメージDOWN"},{name:a("filterModal.resistence"),value:"被ダメージDOWN"},{name:a("filterModal.hp_restoration"),value:"HP回復"},{name:a("filterModal.hp_regen"),value:"HP継続回復"},{name:a("filterModal.nullifies_blind"),value:"暗闇無効"},{name:a("filterModal.nullifies_curse"),value:"呪い無効"},{name:a("filterModal.nullifies_freeze"),value:"凍結無効"},{name:a("filterModal.debuff_removal"),value:"デバフ解除"},{name:a("filterModal.curse"),value:"呪い"}],A=j.reduce((e,t)=>{const l=t.dorm;return e[l]||(e[l]=[]),e[l].push(t),e},{}),q=()=>{const e=document.querySelector(".display-block");e&&(O.value=e.clientWidth)},X=()=>{q()};Pe(async()=>{$.value?(u.value=Object.values(A).flat().map(e=>e.name_en),m.value=["SSR","SR","R"],p.value=["バランス","ディフェンス","アタック"],c.value=["火","水","木","無"],i.value=["ATKUP","ダメージUP","クリティカル","属性ダメージUP","被ダメージUP","ATKDOWN","ダメージDOWN","回避","属性ダメージDOWN","被ダメージDOWN","HP回復","HP継続回復","暗闇無効","呪い無効","凍結無効","デバフ解除","呪い"]):(C.value.length>0&&(u.value=[...C.value]),P.value.length>0&&(m.value=[...P.value]),R.value.length>0&&(p.value=[...R.value]),W.value.length>0&&(c.value=[...W.value]),w.value.length>0&&(i.value=[...w.value])),$.value=!1,q(),window.addEventListener("resize",X),D.value=await Ue(j)}),Re(()=>{window.removeEventListener("resize",X)});function oe(){C.value=[...u.value],P.value=[...m.value],R.value=[...p.value],W.value=[...c.value],w.value=[...i.value],h.value.forEach(e=>{if(!m.value.includes(e.rare)){e.visible=!1;return}const t=j.find(l=>l.name_ja===e.chara||l.name_en===e.chara);if(!t||!u.value.includes(t.name_en)){e.visible=!1;return}if(!p.value.includes(e.attr)){e.visible=!1;return}if(!c.value.includes(e.magic1atr)&&!c.value.includes(e.magic2atr)&&!c.value.includes(e.magic3atr)){e.visible=!1;return}if(i.value.length===17)e.visible=!0;else if(!i.value.some(s=>e.etc.includes(s))){e.visible=!1;return}}),G("close")}function H(e){if(e==="statusEffects")T.every(l=>i.value.includes(l.value))?i.value=[]:i.value=T.map(l=>l.value);else if(e==="cardAttributes"){const t=["SSR","SR","R"].every(n=>m.value.includes(n)),l=["バランス","ディフェンス","アタック"].every(n=>p.value.includes(n)),s=["火","水","木","無"].every(n=>c.value.includes(n));t&&l&&s?(m.value=[],p.value=[],c.value=[]):(m.value=["SSR","SR","R"],p.value=["バランス","ディフェンス","アタック"],c.value=["火","水","木","無"])}else{const t=A[e]||[];t.every(s=>u.value.includes(s.name_en))?u.value=u.value.filter(s=>!t.some(n=>n.name_en===s)):u.value=[...new Set([...u.value,...t.map(s=>s.name_en)])]}}function L(e){return e==="cardAttributes"?E.every(l=>m.value.includes(l))&&J.value.every(l=>p.value.includes(l.value))&&Q.value.every(l=>c.value.includes(l.value)):e==="statusEffects"?T.every(l=>i.value.includes(l.value)):A[e].every(l=>u.value.includes(l.name_en))}function ie(e){u.value=u.value.includes(e)?u.value.filter(t=>t!==e):[...u.value,e]}const re=e=>64+(se+10+ne)*e.length+10,de=e=>({width:e===1?"100%":"50%"}),ce=()=>{const e=[];let t=[],l=0;const s=O.value,n=2;return Object.entries(A).forEach(([_,Y])=>{const z=re(Y);z>=s/n?(t.length>0&&(e.push(t),t=[],l=0),e.push([_])):l+z<=s&&t.length<n?(t.push(_),l+=z):(e.push(t),t=[_],l=z)}),t.length>0&&e.push(t),e};return(e,t)=>(v(),f("div",$e,[r("div",Oe,[b(B,{small:"",onClick:t[0]||(t[0]=l=>H("cardAttributes"))},{default:x(()=>[U(F(L("cardAttributes")?y(a)("filterModal.release"):y(a)("filterModal.select")),1)]),_:1}),r("div",De,[(v(),f(S,null,M(E,(l,s)=>r("div",{class:"feature-item",key:`rare-${s}`},[b(I,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=n=>m.value=n),value:l,label:l,"hide-details":""},null,8,["modelValue","value","label"])])),64)),(v(!0),f(S,null,M(J.value,(l,s)=>(v(),f("div",{class:"feature-item",key:`type-${s}`},[b(I,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=n=>p.value=n),value:l.value,label:l.name,"hide-details":""},null,8,["modelValue","value","label"])]))),128)),(v(!0),f(S,null,M(Q.value,(l,s)=>(v(),f("div",{class:"feature-item",key:`attr-${s}`},[b(I,{modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=n=>c.value=n),value:l.value,label:l.name,"hide-details":""},null,8,["modelValue","value","label"])]))),128))])]),Ee,r("div",Te,[r("div",ze,[(v(!0),f(S,null,M(ce(),(l,s)=>(v(),f("div",{key:s,class:"row"},[(v(!0),f(S,null,M(l,n=>(v(),f("div",{key:n,style:ae(de(l.length)),class:"character-list"},[r("div",Ie,[b(B,{small:"",onClick:_=>H(n)},{default:x(()=>[U(F(L(n)?y(a)("filterModal.release"):y(a)("filterModal.select")),1)]),_:2},1032,["onClick"]),r("div",Ge,[(v(!0),f(S,null,M(y(A)[n],_=>(v(),f("div",{key:_.name_en,class:We(["character-item",{selected:u.value.includes(_.name_en)}]),onClick:Y=>ie(_.name_en),style:ae({...K.value,opacity:u.value.includes(_.name_en)?1:.5})},[r("img",{src:D.value[_.name_en],alt:_.name_en,class:"character-image"},null,8,He)],14,Ke))),128))])])],4))),128))]))),128))])]),Le,r("div",je,[b(B,{small:"",onClick:t[4]||(t[4]=l=>H("statusEffects"))},{default:x(()=>[U(F(L("statusEffects")?y(a)("filterModal.release"):y(a)("filterModal.select")),1)]),_:1}),r("div",Ne,[(v(),f(S,null,M(T,l=>r("div",{key:l.name,class:"feature-item"},[b(I,{modelValue:i.value,"onUpdate:modelValue":t[5]||(t[5]=s=>i.value=s),value:l.value,label:l.name,"hide-details":""},null,8,["modelValue","value","label"])])),64))])]),r("div",Je,[b(B,{class:"button",onClick:t[6]||(t[6]=l=>e.$emit("close"))},{default:x(()=>[U(F(e.$t("filterModal.cancel")),1)]),_:1}),b(B,{class:"button apply-button",disabled:u.value.length===0||m.value.length===0,onClick:oe},{default:x(()=>[U(F(e.$t("filterModal.submit")),1)]),_:1},8,["disabled"])])],512))}});const el=xe(Qe,[["__scopeId","data-v-39b83784"]]);export{el as F,I as V};
