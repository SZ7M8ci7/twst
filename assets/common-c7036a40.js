import{G as De,v as ae,B as c}from"./index-25f3b6ea.js";import{u as we,_ as Oe}from"./characters-8dd226cf.js";const Me=De("searchSettings",{state:()=>({minEHP:3e4,minHP:3e4,minHPBuddy:0,minEvasion:0,minDuo:0,minBuff:0,minDebuff:0,minCosmic:0,minFire:0,minWater:0,minFlora:0,minReferenceDamage:0,minReferenceAdvantageDamage:0,minReferenceVsHiDamage:0,minReferenceVsMizuDamage:0,minReferenceVsKiDamage:0,maxResult:10,attackNum:10,sortOptions:[{prop:"HP",order:"降順"}],mustCharacters:[],convertedMustCharacters:[],allowSameCharacter:!0}),actions:{updateSearchSettings(t){Object.assign(this,t)}}}),Ie=De("searchResult",{state:()=>({totalResults:0,nowResults:0,results:[],isSearching:!1,errorMessage:""})}),Se=Me(),{minEHP:Be,minHP:Ce,minDebuff:Ke,minBuff:Ue,minHPBuddy:Fe,minEvasion:qe,minDuo:ze,minCosmic:je,minFire:Ne,minWater:We,minFlora:$e,minReferenceDamage:Je,minReferenceAdvantageDamage:Ge,minReferenceVsHiDamage:xe,minReferenceVsKiDamage:Ze,minReferenceVsMizuDamage:Qe,maxResult:ge,sortOptions:Xe,convertedMustCharacters:Ye,allowSameCharacter:et,attackNum:q}=ae(Se),tt=we(),{characters:de}=ae(tt),at=Ie(),{totalResults:N,nowResults:pe,results:P,isSearching:_e,errorMessage:x}=ae(at);function ft(t){(t.key==="e"||t.key==="+")&&t.preventDefault()}function it(t){return[t("comments.HP"),t("comments.effectiveHP"),t("comments.HPBuddy"),t("comments.noHPBuddy"),t("comments.buddy"),t("comments.evasion"),t("comments.duo"),t("comments.buff"),t("comments.debuff"),t("comments.maxCosmic"),t("comments.maxFire"),t("comments.maxWater"),t("comments.maxFlora"),t("comments.neutralDamage"),t("comments.advantageDamage"),t("comments.damageAgainstFire"),t("comments.damageAgainstWater"),t("comments.damageAgainstFlora")]}function gt(t){return[t("comments.riddle"),t("comments.ace"),t("comments.deuce"),t("comments.cater"),t("comments.trey"),t("comments.leona"),t("comments.jack"),t("comments.ruggie"),t("comments.azul"),t("comments.jade"),t("comments.floyd"),t("comments.kalim"),t("comments.jamil"),t("comments.vil"),t("comments.epel"),t("comments.rook"),t("comments.idia"),t("comments.ortho"),t("comments.malleus"),t("comments.silver"),t("comments.sebek"),t("comments.lilia"),t("comments.grim"),t("comments.lolo"),t("comments.crowley"),t("comments.crewel"),t("comments.fellow")]}const ot=["hp","ehp","hpBuudy","noHpBuddy","buddy","evasion","duo","buff","debuff","maxCosmic","maxFire","maxWater","maxFlora","referenceDamage","referenceAdvantageDamage","referenceVsHiDamage","referenceVsMizuDamage","referenceVsKiDamage"],dt={Riddle:"リドル",Ace:"エース",Deuce:"デュース",Cater:"ケイト",Trey:"トレイ",Leona:"レオナ",Jack:"ジャック",Ruggie:"ラギー",Azul:"アズール",Jade:"ジェイド",Floyd:"フロイド",Kalim:"カリム",Jamil:"ジャミル",Vil:"ヴィル",Epel:"エペル",Rook:"ルーク",Idia:"イデア",Ortho:"オルト",Malleus:"マレウス",Silver:"シルバー",Sebek:"セベク",Lilia:"リリア",Grim:"グリム",Lolo:"ロロ",Crowley:"クロウリー",Crewel:"クルーウェル",Fellow:"フェロー"},$={"HPUP(小)":{hp:.2,atk:0,heal:0,conHeal:0},"HP&ATKUP(小)":{hp:.2,atk:.2,heal:0,conHeal:0},"HPUP(中)":{hp:.3,atk:0,heal:0,conHeal:0},"HP&ATKUP(中)":{hp:.3,atk:.35,heal:0,conHeal:0},"ATKUP(小)":{hp:0,atk:.2,heal:0,conHeal:0},"ATKUP(中)":{hp:0,atk:.35,heal:0,conHeal:0},"回復(小)":{hp:0,atk:0,heal:1.1,conHeal:0},"回復&継続回復(小)":{hp:0,atk:0,heal:1.1,conHeal:.15*3},"回復(中)":{hp:0,atk:0,heal:1.7,conHeal:0},"回復&継続回復(中)":{hp:0,atk:0,heal:1.7,conHeal:.25*3},"継続回復(小)":{hp:0,atk:0,heal:0,conHeal:.15*3},"継続回復(中)":{hp:0,atk:0,heal:0,conHeal:.25*3}};function Z(t){var i;return((i=$[t])==null?void 0:i.hp)||0}function Q(t){var i;return((i=$[t])==null?void 0:i.atk)||0}function X(t){var i;return((i=$[t])==null?void 0:i.heal)||0}function Y(t){var i;return((i=$[t])==null?void 0:i.conHeal)||0}const rt={"ATKUP(極小)":1.1,"ATKUP(小)":1.2,"ATKUP(中)":1.35,"ATKUP(大)":1.5,"ATKUP(極大)":1.8},st={"ダメUP(極小)":.025,"ダメUP(小)":.05,"ダメUP(中)":.0875,"ダメUP(大)":.125,"ダメUP(極大)":.1875,"属性ダメUP(極小)":.03,"属性ダメUP(小)":.06,"属性ダメUP(中)":.1005,"属性ダメUP(大)":.15,"属性ダメUP(極大)":.27},ee={};function nt(t,i,f,r){const s=`${t},${i},${f},${r}`;if(s in ee)return ee[s];let R=i.includes("弱")?.75:1;R*=f==="無"?1.1:1,R+=st[t]||0;let g=1;i.includes("連撃")?g=1.8:i.includes("デュオ")&&(g=2.4);const y=r*R*g;return ee[s]=y,y}function te(t,i,f,r,s){return r=(rt[t]||1)*r+r*s,nt(t,i,f=="無"?"無":"無以外",r)}function z(t,i,f){const r=[t,i,f];return r.sort((s,R)=>R-s),[r[0],r[1]]}function mt(t){const i=new Set;for(const e of t)i.add(e.chara);if(!Array.from(Ye.value).every(e=>i.has(e)))return;let r=0,s=0,R=0,g=0,y=0,h=0,b=0,E=0,u=0,C=0,a=0,m=0,l=0;const d=[],p=[],_=[],D=[],n=[];let H=0,V=0,K=0,U=0,F=0;const A={},J={},k={},ie=[];let oe="";const w=[],re=[],se=[],ne=[],me=[],ce=[],ue=[];t.sort((e,o)=>o.calcBaseATK-e.calcBaseATK),t.forEach((e,o)=>{A[o]=!1,J[o]=!1,k[o]=!1});function j(e,o){let T=0;return e.magic1atr==o&&(T+=1),e.magic2atr==o&&(T+=1),e.magic3atr==o&&e.hasM3&&(T+=1),Math.min(T,2)}if(t.forEach((e,o)=>{ie.push(e.imgUrl),oe+="&name"+(o+1)+"="+e.name,r+=e.calcBaseHP,b+=e.buff_count,E+=e.debuff_count,C+=j(e,"無"),a+=j(e,"火"),m+=j(e,"水"),l+=j(e,"木");let T=!1,O=0;if(i.has(e.buddy1c)){y+=1;const v=Z(e.buddy1s);O+=Q(e.buddy1s),v!=0&&(g+=1,T=!0,r+=e.calcBaseHP*v)}if(i.has(e.buddy2c)){y+=1;const v=Z(e.buddy2s);O+=Q(e.buddy2s),v!=0&&(g+=1,T=!0,r+=e.calcBaseHP*v)}if(i.has(e.buddy3c)){y+=1;const v=Z(e.buddy3s);O+=Q(e.buddy3s),v!=0&&(g+=1,T=!0,r+=e.calcBaseHP*v)}const le=(X(e.magic1heal)+X(e.magic2heal)+(e.hasM3?X(e.magic3heal):0))*e.calcBaseATK,fe=(Y(e.magic1heal)+Y(e.magic2heal)+(e.hasM3?Y(e.magic3heal):0))*e.calcBaseHP;s+=le+fe,re.push(le+fe),R+=e.evasion,T||(h+=1);let G=e.magic2pow;if(k[o])G="デュオ",u+=1;else{if(!k[o]){for(const[v,B]of t.entries())if(B.duo==e.chara&&e.duo==B.chara&&!k[o]&&!k[v]){k[o]=!0,k[v]=!0,A[o]=!0,A[v]=!0;break}if(!A[o]){for(const[v,B]of t.entries())if(e.duo==B.chara&&!k[o]&&!A[o]&&!J[v]){k[o]=!0,A[o]=!0,J[v]=!0;break}}if(!A[o]){for(const[v,B]of t.entries())if(e.duo==B.chara&&!k[o]&&!A[o]&&!A[v]){k[o]=!0,A[o]=!0,A[v]=!0;break}}}k[o]&&(G="デュオ",u+=1)}const M=te(e.magic1buf,e.magic1pow,e.magic1atr,e.calcBaseATK,O),I=te(e.magic2buf,G,e.magic2atr,e.calcBaseATK,O),S=e.hasM3?te(e.magic3buf,e.magic3pow,e.magic3atr,e.calcBaseATK,O):0,Pe=e.magic1atr=="無"?M:M*1.5,Re=e.magic2atr=="無"?I:I*1.5,ke=e.magic3atr=="無"?S:S*1.5,Ae=L(e.magic1atr,"火",M),he=L(e.magic2atr,"火",I),ye=L(e.magic3atr,"火",S),Ee=L(e.magic1atr,"水",M),He=L(e.magic2atr,"水",I),Te=L(e.magic3atr,"水",S),Le=L(e.magic1atr,"木",M),be=L(e.magic2atr,"木",I),Ve=L(e.magic3atr,"木",S);d.push(...z(M,I,S)),p.push(...z(Pe,Re,ke)),_.push(...z(Ae,he,ye)),D.push(...z(Ee,He,Te)),n.push(...z(Le,be,Ve)),se.push(d.at(-1)+d.at(-2)),ne.push(p.at(-1)+p.at(-2)),me.push(_.at(-1)+_.at(-2)),ce.push(D.at(-1)+D.at(-2)),ue.push(n.at(-1)+n.at(-2))}),H=d.sort((e,o)=>o-e).slice(0,q.value).reduce((e,o)=>e+o,0),V=p.sort((e,o)=>o-e).slice(0,q.value).reduce((e,o)=>e+o,0),K=_.sort((e,o)=>o-e).slice(0,q.value).reduce((e,o)=>e+o,0),U=D.sort((e,o)=>o-e).slice(0,q.value).reduce((e,o)=>e+o,0),F=n.sort((e,o)=>o-e).slice(0,q.value).reduce((e,o)=>e+o,0),!(r<Ce.value)&&!(r+s<Be.value)&&!(g<Fe.value)&&!(R<qe.value)&&!(u<ze.value)&&!(b<Ue.value)&&!(E<Ke.value)&&!(C<je.value)&&!(a<Ne.value)&&!(m<We.value)&&!(l<$e.value)&&!(H<Je.value)&&!(V<Ge.value)&&!(K<xe.value)&&!(U<Qe.value)&&!(F<Ze.value))return H=Math.floor(H),V=Math.floor(V),K=Math.floor(K),U=Math.floor(U),F=Math.floor(F),w.push(re),w.push(se),w.push(ne),w.push(me),w.push(ce),w.push(ue),[r,r+s,R,g,y,h,u,b,E,C,a,m,l,H,V,K,U,F,...ie,oe,w]}const ct={水:{火:1.5,木:.5},木:{水:1.5,火:.5},火:{木:1.5,水:.5}};function L(t,i,f){var s;const r=(s=ct[t])==null?void 0:s[i];return r?f*r:f}function ve(t){return function(i,f){for(let r=0;r<t.length;r++){const{key:s,order:R}=t[r];if(!Object.prototype.hasOwnProperty.call(i,s)||!Object.prototype.hasOwnProperty.call(f,s))continue;let g=0;if(i[s]<f[s]?g=-1:i[s]>f[s]&&(g=1),g!==0)return R==="降順"?g*-1:g}return 0}}function W(t){return t<=0?1:t*W(t-1)}async function pt(t){for(const a of de.value)if(a.required&&a.level==0){x.value=t("error.requiredCharacter");return}const i=de.value.filter(a=>a.level>0),f=i.length;if(f<5){x.value=t("error.fewCharacter");return}pe.value=0;const r=it(t),s=[];for(const a of Xe.value)for(let m=0;m<r.length;m++)if(r[m]==a.prop){let l="降順";switch(a.order){case"ASC":l="昇順";break;case"DESC":l="降順";break;case"昇順":case"降順":l=a.order;break;default:continue}s.push({key:ot[m],order:l})}const R=s[0].order==="昇順";async function g(){P.value.sort(ve(s));const a=P.value.slice(0,ge.value);P.value=[...a],P.value.length>0&&(b=P.value[P.value.length-1][s[0].key]),await new Promise(requestAnimationFrame)}const y=new Set(["referenceDamage","referenceAdvantageDamage","referenceVsHiDamage","referenceVsMizuDamage","referenceVsKiDamage"]);s[0].key in y?i.sort((a,m)=>a.required&&!m.required?-1:!a.required&&m.required?1:m.atk-a.atk):i.sort((a,m)=>a.required&&!m.required?-1:!a.required&&m.required?1:m.hp-a.hp);const h=i.filter(a=>a.required).length;if(h>5){x.value="必須設定されたキャラが多すぎます";return}P.value=[],i.forEach(a=>{let m=110;a.rare=="SR"?m=90:a.rare=="R"&&(m=70);const l=a.level/m;a.calcBaseHP=(a.hp-a.base_hp)*l+a.base_hp,a.calcBaseATK=(a.atk-a.base_atk)*l+a.base_atk});let b=s[0].order==="昇順"?1/0:-1/0;const E=async(a,m,l,d,p)=>new Promise(_=>{const D=[i[a],i[m],i[l],i[d],i[p]],n=mt(D);if(n){const H={hp:Math.round(n[0]),ehp:Math.round(n[1]),evasion:n[2],hpBuudy:n[3],buddy:n[4],noHpBuddy:n[5],duo:n[6],buff:n[7],debuff:n[8],maxCosmic:n[9],maxFire:n[10],maxWater:n[11],maxFlora:n[12],referenceDamage:n[13],referenceAdvantageDamage:n[14],referenceVsHiDamage:n[15],referenceVsMizuDamage:n[16],referenceVsKiDamage:n[17],chara1:n[18],chara2:n[19],chara3:n[20],chara4:n[21],chara5:n[22],simuURL:n[23],detailList:n[24]},V=H[s[0].key];(R&&V<b||!R&&V>b)&&P.value.push(H)}pe.value+=1,_()}),u=new Array(5).fill(f);for(let a=0;a<h;a++)u[a]=a+1;if(et.value){let a=Date.now();const m=u[0]*(u[1]-1)*(u[2]-2)*(u[3]-3);if(N.value=m*(u[4]-4)/W(5-h)+m*4/W(4-h),h==5){N.value=1,await E(0,1,2,3,4),await new Promise(requestAnimationFrame);return}for(let l=0;l<u[0];l++)for(let d=l+1;d<u[1];d++)for(let p=d+1;p<u[2];p++){if(!_e.value)return;for(let _=p+1;_<u[3];_++){for(let D=_+1;D<u[4];D++)await E(l,d,p,_,D),Date.now()-a>2e3&&(a=Date.now(),await g());for(const D of[l,d,p,_])await E(l,d,p,_,D),Date.now()-a>2e3&&(a=Date.now(),await g())}}}else{const a=u[0]*(u[1]-1)*(u[2]-2)*(u[3]-3);if(N.value=a*(u[4]-4)/W(5-h),h==5){N.value=1,await E(0,1,2,3,4),await new Promise(requestAnimationFrame);return}let m=Date.now();for(let l=0;l<u[0];l++)for(let d=l+1;d<u[1];d++)for(let p=d+1;p<u[2];p++){if(!_e.value)return;for(let _=p+1;_<u[3];_++)for(let D=_+1;D<u[4];D++)await E(l,d,p,_,D),Date.now()-m>2e3&&(m=Date.now(),await g())}}P.value.sort(ve(s));const C=P.value.slice(0,ge.value);P.value=[...C],P.value.length>0&&(b=P.value[P.value.length-1][s[0].key])}async function _t(t){const i={};return await Promise.all(t.map(f=>Oe(Object.assign({"../assets/img/icon/ace.png":()=>c(()=>import("./ace-34f83527.js"),[],import.meta.url),"../assets/img/icon/azul.png":()=>c(()=>import("./azul-104d0980.js"),[],import.meta.url),"../assets/img/icon/cater.png":()=>c(()=>import("./cater-b85b6103.js"),[],import.meta.url),"../assets/img/icon/crewel.png":()=>c(()=>import("./crewel-6ab42db2.js"),[],import.meta.url),"../assets/img/icon/crowley.png":()=>c(()=>import("./crowley-fd99c5d0.js"),[],import.meta.url),"../assets/img/icon/deuce.png":()=>c(()=>import("./deuce-2352262f.js"),[],import.meta.url),"../assets/img/icon/epel.png":()=>c(()=>import("./epel-0faa9669.js"),[],import.meta.url),"../assets/img/icon/fellow.png":()=>c(()=>import("./fellow-a00d75c7.js"),[],import.meta.url),"../assets/img/icon/floyd.png":()=>c(()=>import("./floyd-368ab9db.js"),[],import.meta.url),"../assets/img/icon/grim.png":()=>c(()=>import("./grim-724f2176.js"),[],import.meta.url),"../assets/img/icon/idia.png":()=>c(()=>import("./idia-31cb1427.js"),[],import.meta.url),"../assets/img/icon/jack.png":()=>c(()=>import("./jack-23267685.js"),[],import.meta.url),"../assets/img/icon/jade.png":()=>c(()=>import("./jade-561d2cbc.js"),[],import.meta.url),"../assets/img/icon/jamil.png":()=>c(()=>import("./jamil-34a1eb2e.js"),[],import.meta.url),"../assets/img/icon/kalim.png":()=>c(()=>import("./kalim-65c834c5.js"),[],import.meta.url),"../assets/img/icon/leona.png":()=>c(()=>import("./leona-536d417e.js"),[],import.meta.url),"../assets/img/icon/lilia.png":()=>c(()=>import("./lilia-7ddfbf2f.js"),[],import.meta.url),"../assets/img/icon/malleus.png":()=>c(()=>import("./malleus-d8a8aef9.js"),[],import.meta.url),"../assets/img/icon/ortho.png":()=>c(()=>import("./ortho-b307a73d.js"),[],import.meta.url),"../assets/img/icon/riddle.png":()=>c(()=>import("./riddle-bb106fb0.js"),[],import.meta.url),"../assets/img/icon/rollo.png":()=>c(()=>import("./rollo-abfad1a5.js"),[],import.meta.url),"../assets/img/icon/rook.png":()=>c(()=>import("./rook-08b4c270.js"),[],import.meta.url),"../assets/img/icon/ruggie.png":()=>c(()=>import("./ruggie-825bc723.js"),[],import.meta.url),"../assets/img/icon/sebek.png":()=>c(()=>import("./sebek-d7f9f410.js"),[],import.meta.url),"../assets/img/icon/silver.png":()=>c(()=>import("./silver-6b693d48.js"),[],import.meta.url),"../assets/img/icon/trey.png":()=>c(()=>import("./trey-16a59558.js"),[],import.meta.url),"../assets/img/icon/vil.png":()=>c(()=>import("./vil-5fff0695.js"),[],import.meta.url)}),`../assets/img/icon/${f.name_en}.png`).then(r=>{i[f.name_en]=r.default}).catch(()=>{i[f.name_en]=""}))),i}export{pt as a,Me as b,ft as c,gt as d,dt as e,_t as f,it as g,Ie as u};
